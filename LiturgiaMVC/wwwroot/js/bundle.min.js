const ritmosNomes=Object.keys(ritmosJson);var _sourceChimbalAberto,_ritmoSelecionado="aro",_selecionarRitmoElem=document.getElementById("selectRitmo"),_trocarRitmo=!1,_viradaRitmo="",_chimbalIsAberto=!1;function setBeats(e){var t=ritmosJson[e],n=document.getElementById("measureLength");t.includes(323)?n.value=24:t.includes(219)?n.value=16:t.includes(167)?n.value=12:(t.includes(96)||t.includes(110))&&(n.value=6);var o=new Event("change");n.dispatchEvent(o)}function fazerViradaBateria(){_viradaRitmo=_ritmoSelecionado+"_fill"}function selecionarRitmo(e,t=!1){if(_trocarRitmo){fazerViradaBateria(),!1==t&&(_trocarRitmo=!1);var n=e;e.includes("_")&&(n=e.split("_")[0]),setBeats(n);var o=document.getElementById("tracker-table");Array.from(document.getElementsByClassName("tracker-enabled")).forEach(e=>{e.classList.remove("tracker-enabled")});var i=o.getElementsByTagName("td");ritmosJson[e].forEach(e=>{i[e].classList.add("tracker-enabled")})}}!function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n;return i(t[a][1][e]||e)},d,d.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){t.exports=function e(t){this.ctx=t,this.mode="exponentialRampToValueAtTime",this.options={attackAmp:.1,decayAmp:.3,sustainAmp:.7,releaseAmp:.01,attackTime:.1,decayTime:.2,sustainTime:1,releaseTime:3.4,autoRelease:!0},this.setOptions=function(e){this.options=Object.assign(this.options,e)},this.gainNode,this.audioTime,this.getGainNode=e=>(this.gainNode=this.ctx.createGain(),this.audioTime=e,this.gainNode.gain.setValueAtTime(1e-7,e),this.gainNode.gain[this.mode](this.options.attackAmp,e+this.options.attackTime),this.gainNode.gain[this.mode](this.options.decayAmp,e+this.options.attackTime+this.options.decayTime),this.gainNode.gain[this.mode](this.options.sustainAmp,e+this.options.attackTime+this.options.sustainTime),this.options.autoRelease&&(this.gainNode.gain[this.mode](this.options.releaseAmp,e+this.releaseTime()),this.disconnect(e+this.releaseTime())),this.gainNode),this.releaseNow=()=>{this.gainNode.gain[this.mode](this.options.releaseAmp,this.ctx.currentTime+this.options.releaseTime),this.disconnect(this.options.releaseTime)},this.releaseTime=function(){return this.options.attackTime+this.options.decayTime+this.options.sustainTime+this.options.releaseTime},this.releaseTimeNow=function(){return this.ctx.currentTime+this.releaseTime()},this.disconnect=e=>{setTimeout(()=>{this.gainNode.disconnect()},1e3*e)}}},{}],2:[function(e,t,n){function o(e,t){this.context=e,this.buffer=t}o.prototype.setup=function(){this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.context.destination)},o.prototype.get=function(){return this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source},o.prototype.trigger=function(e){this.setup(),this.source.start(e)},t.exports=o},{}],3:[function(e,t,n){/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */ var o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in o,r=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c=function(e){setTimeout(function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()},4e4)},d=function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var i=e["on"+t[o]];if("function"==typeof i)try{i.call(e,n||e)}catch(r){l(r)}}},u=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e},h=function(t,l,h){h||(t=u(t));var f,m=this,I="application/octet-stream"===t.type,p=function(){d(m,"writestart progress write writeend".split(" "))};if(m.readyState=m.INIT,i){f=n().createObjectURL(t),setTimeout(function(){o.href=f,o.download=l,r(o),p(),c(f),m.readyState=m.DONE});return}!function(){if((s||I&&a)&&e.FileReader){var o=new FileReader;o.onloadend=function(){var t=s?o.result:o.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,m.readyState=m.DONE,p()},o.readAsDataURL(t),m.readyState=m.INIT;return}(f||(f=n().createObjectURL(t)),I)?e.location.href=f:e.open(f,"_blank")||(e.location.href=f),m.readyState=m.DONE,p(),c(f)}()},f=h.prototype,m=function(e,t,n){return new h(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=u(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports?t.exports.saveAs=o:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return o})},{}],4:[function(e,t,n){t.exports=function e(t){return new Promise((e,n)=>{var o=new XMLHttpRequest;o.open("get",t,!0),o.responseType="text",o.onload=function(){if(200===o.status)try{e(JSON.parse(o.responseText))}catch(i){n(i)}else n("JSON could not be loaded "+t)},o.send()})}},{}],5:[function(e,t,n){function o(e){var t=e.elements,n={},o=0,i=null;for(o=0;o<t.length;o+=1)switch((i=t[o]).type){case"submit":break;case"radio":case"checkbox":i.checked&&(n[i.name]=i.value);break;case"select-multiple":var r=a(i);r.length>0&&(n[i.name]=r);break;default:void 0!==i.value&&(n[i.name]=i.value)}return n}function i(e,t){var n=e.elements,o=0,i=null;for(o=0;o<n.length;o+=1)switch((i=n[o]).type){case"submit":break;case"radio":case"checkbox":t[i.name]===i.value?i.checked=!0:i.checked=!1;break;case"select-multiple":t[i.name]&&r(i,t[i.name]);break;default:void 0!==t[i.name]&&(i.value=t[i.name])}}function r(e,t){for(var n,o=e.options,i=0,r=o.length;i<r;i++)n=o[i],t.indexOf(n.value)>-1?n.selected=!0:n.selected=!1}function a(e){for(var t,n=[],o=e&&e.options,i=0,r=o.length;i<r;i++)(t=o[i]).selected&&n.push(t.value||t.text);return n}t.exports=function e(){this.set=i,this.get=o}},{}],6:[function(e,t,n){"use strict";var o=e("obj-type");t.exports=function(e,t){if(-1===o(e).indexOf("element"))throw TypeError("Expected an HTML DOM element as first argument");if("string"!=typeof t)throw TypeError("Expected a string as second argument");return e.classList?e.classList.contains(t):RegExp("(^| )"+t+"( |$)","gi").test(e.className)}},{"obj-type":9}],7:[function(e,t,n){var o=e("tiny-sample-loader"),i=e("audio-buffer-instrument"),r=e("get-json-promise"),a={};t.exports=function e(t,n){var s,l;return s=t,l=n,new Promise((e,t)=>{r(l).then(function(t){var n,r,l,c;Promise.all((n=s,l=(r=t).samples,c=[],r.filename=[],r.files.forEach(function(e){var t=e.replace(/\.[^/.]+$/,"");r.filename.push(t);let s=o(n,l+e);s.then(function(e){a[t]=new i(n,e)}),c.push(s)}),c)).then(function(){e({data:t,buffers:a})}).catch(function(e){console.log(e)})}).catch(function(e){t(e)})})}},{"audio-buffer-instrument":2,"get-json-promise":4,"tiny-sample-loader":8}],8:[function(e,t,n){t.exports=function e(t,n){return new Promise((e,o)=>{var i=new XMLHttpRequest;i.open("get",n,!0),i.responseType="arraybuffer",i.onload=function(){200===i.status?t.decodeAudioData(i.response,function(t){e(t)}):o("tiny-sample-loader request failed")},i.send()})}},{}],9:[function(e,t,n){"use strict";t.exports=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()}},{}],10:[function(e,t,n){t.exports=function e(t,n,o,i){this.appendToID=t,this.selectID=n,this.options=o,this.selected=i,this.selectList,this.create=function(e){var t=document.getElementById(this.appendToID);this.selectList=document.createElement("select"),this.selectList.id=this.selectID,t.appendChild(this.selectList),this.update(n,this.options,this.selected)},this.onChange=function(e){this.selectList.addEventListener("change",function(){e(this.value)})},this.update=function(e,t,n){this.delete(e);var o=document.getElementById(e);for(var i in t){var r=document.createElement("option");r.value=i,r.text=t[i],o.appendChild(r),i===n&&r.setAttribute("selected",!0)}},this.getSelected=function(e){for(var t,n=document.getElementById(e),o=0,i=n.options.length;o<i;o++)if(!0===(t=n.options[o]).selected)return t.value;return!1},this.delete=function(e){var t=document.getElementById(e);for(var n in t)t.remove(n)},this.getAsString=function(){return document.getElementById(this.appendToID).outerHTML}}},{}],11:[function(e,t,n){var o=e("./lib/WAAClock");t.exports=o,"undefined"!=typeof window&&(window.WAAClock=o)},{"./lib/WAAClock":12}],12:[function(e,t,n){(function(e){var n={toleranceLate:.1,toleranceEarly:.001},o=function(e,t,n){this.clock=e,this.func=n,this._cleared=!1,this.toleranceLate=e.toleranceLate,this.toleranceEarly=e.toleranceEarly,this._latestTime=null,this._earliestTime=null,this.deadline=null,this.repeatTime=null,this.schedule(t)};o.prototype.clear=function(){return this.clock._removeEvent(this),this._cleared=!0,this},o.prototype.repeat=function(e){if(0===e)throw Error("delay cannot be 0");return this.repeatTime=e,this.clock._hasEvent(this)||this.schedule(this.deadline+this.repeatTime),this},o.prototype.tolerance=function(e){return"number"==typeof e.late&&(this.toleranceLate=e.late),"number"==typeof e.early&&(this.toleranceEarly=e.early),this._refreshEarlyLateDates(),this.clock._hasEvent(this)&&(this.clock._removeEvent(this),this.clock._insertEvent(this)),this},o.prototype.isRepeated=function(){return null!==this.repeatTime},o.prototype.schedule=function(e){this._cleared=!1,this.deadline=e,this._refreshEarlyLateDates(),this.clock.context.currentTime>=this._earliestTime?this._execute():(this.clock._hasEvent(this)&&this.clock._removeEvent(this),this.clock._insertEvent(this))},o.prototype.timeStretch=function(e,t){this.isRepeated()&&(this.repeatTime=this.repeatTime*t);var n=e+t*(this.deadline-e);if(this.isRepeated())for(;this.clock.context.currentTime>=n-this.toleranceEarly;)n+=this.repeatTime;this.schedule(n)},o.prototype._execute=function(){!1!==this.clock._started&&(this.clock._removeEvent(this),this.clock.context.currentTime<this._latestTime?this.func(this):(this.onexpired&&this.onexpired(this),console.warn("event expired")),!this.clock._hasEvent(this)&&this.isRepeated()&&!this._cleared&&this.schedule(this.deadline+this.repeatTime))},o.prototype._refreshEarlyLateDates=function(){this._latestTime=this.deadline+this.toleranceLate,this._earliestTime=this.deadline-this.toleranceEarly};var i=t.exports=function(e,t){t=t||{},this.tickMethod=t.tickMethod||"ScriptProcessorNode",this.toleranceEarly=t.toleranceEarly||n.toleranceEarly,this.toleranceLate=t.toleranceLate||n.toleranceLate,this.context=e,this._events=[],this._started=!1};i.prototype.setTimeout=function(e,t){return this._createEvent(e,this._absTime(t))},i.prototype.callbackAtTime=function(e,t){return this._createEvent(e,t)},i.prototype.timeStretch=function(e,t,n){return t.forEach(function(t){t.timeStretch(e,n)}),t},i.prototype.start=function(){if(!1===this._started){var t=this;if(this._started=!0,this._events=[],"ScriptProcessorNode"===this.tickMethod)this._clockNode=this.context.createScriptProcessor(256,1,1),this._clockNode.connect(this.context.destination),this._clockNode.onaudioprocess=function(){e.nextTick(function(){t._tick()})};else if("manual"===this.tickMethod);else throw Error("invalid tickMethod "+this.tickMethod)}},i.prototype.stop=function(){!0===this._started&&(this._started=!1,this._clockNode.disconnect())},i.prototype._tick=function(){for(var e=this._events.shift();e&&e._earliestTime<=this.context.currentTime;)e._execute(),e=this._events.shift();e&&this._events.unshift(e)},i.prototype._createEvent=function(e,t){return new o(this,t,e)},i.prototype._insertEvent=function(e){this._events.splice(this._indexByTime(e._earliestTime),0,e)},i.prototype._removeEvent=function(e){var t=this._events.indexOf(e);-1!==t&&this._events.splice(t,1)},i.prototype._hasEvent=function(e){return -1!==this._events.indexOf(e)},i.prototype._indexByTime=function(e){for(var t,n=0,o=this._events.length;n<o;)t=Math.floor((n+o)/2),this._events[t]._earliestTime<e?n=t+1:o=t;return n},i.prototype._absTime=function(e){return e+this.context.currentTime},i.prototype._relTime=function(e){return e-this.context.currentTime}}).call(this,e("_process"))},{_process:18}],13:[function(e,t,n){let o=e("load-sample-set"),i=e("select-element"),r=e("get-set-form-values"),a=e("adsr-gain-node"),s=e("./simple-tracker"),l=e("file-saver"),c=e("./get-set-controls"),d=new c,u=new AudioContext,h=e("./default-track");function f(e,t,n){o(e,t).then(function(e){m=e.buffers,sampleData=e.data,n||(n=p.getTrack()),n.settings.measureLength||(n.settings.measureLength=16),I=sampleData,b(sampleData,n.settings.measureLength),w.loadTrackerValues(n.beat),w.setupEvents()})}window.onload=function(){let e=new r,t=document.getElementById("trackerControls");e.set(t,h.settings),d.setTrackerControls(h.settings),f(u,h.settings.sampleSet,h),document.getElementById("selectRitmo").addEventListener("change",function(e){var t=document.getElementsByClassName("selecionadoDrum");t.length>0&&t[0].classList.toggle("selecionadoDrum",!1),selecionarRitmo(document.activeElement.value)}),document.getElementById("aro").addEventListener("click",function(e){B(document.activeElement),L("aro")}),document.getElementById("meiaLua").addEventListener("click",function(e){B(document.activeElement),L("meiaLua")}),document.getElementById("caixa").addEventListener("click",function(e){B(document.activeElement),L("")}),document.getElementById("brush").addEventListener("click",function(e){B(document.activeElement),L("brush")}),document.getElementById("ride").addEventListener("click",function(e){B(document.activeElement),L("ride")}),document.getElementById("chimbal").addEventListener("click",function(e){B(document.activeElement),L("chimbal")}),document.getElementById("play-pause_bateria").addEventListener("click",function(e){B("")}),document.getElementById("prato").addEventListener("click",function(e){B(document.activeElement)}),document.getElementById("play").addEventListener("click",function(e){let t=new S().getTrack();w.measureLength=t.settings.measureLength,w.stop(),w.runSchedule(d.options.bpm)}),document.getElementById("pause").addEventListener("click",function(e){w.stop()}),document.getElementById("stop").addEventListener("click",function(e){w.stop(),w=new s(u,v)}),document.getElementById("bpm").addEventListener("change",function(e){var t=document.getElementById("bpmRange").value;t=6e4/t,24==document.getElementById("measureLength").value&&(t/=2),document.getElementById("light").style.animation="blink "+t+"ms infinite",d.setTrackerControls(),w.running&&(w.stop(),w.runSchedule(d.options.bpm))}),document.getElementById("bpmRange").addEventListener("input",function(e){var t=document.getElementById("bpmRange"),n=document.getElementById("bpm");n.value=t.value;var o=new Event("change");n.dispatchEvent(o)}),document.getElementById("measureLength").addEventListener("change",e=>{let t=parseInt(document.getElementById("measureLength").value);if(t<1)return;w.measureLength=t;let n=w.getTrackerValues();b(I,t),w.measureLength=t,w.loadTrackerValues(n),w.setupEvents()}),$(".base").on("change",function(){d.setTrackerControls()}),(p=new S).setupStorage()};var m,I,p,_={};function b(e,t){(_=e).title=_.filename,w.drawTracker(e.filename.length,t,_)}function g(e,t){setTimeout(()=>{e.disconnect()},1e3*(t.attackTime+t.sustainTime+t.releaseTime))}function v(e,t){var n,o;let i=_.filename[e.rowId],r=m[i].get(),s=d.getTrackerControls(),l,c,h,f;(l=function e(t){if(!s.delayEnabled)return t}(l=(o=n=r,c=new a(u),c.mode="linearRampToValueAtTime",h=d.getTrackerControls(),c.setOptions(h),f=c.getGainNode(t),o.connect(f),f))).connect(u.destination),("chimbal"==i||"chimbal2"==i)&&_chimbalIsAberto&&(_sourceChimbalAberto.stop(t),_chimbalIsAberto=!1),n.start(t),"aberto"==i&&(_sourceChimbalAberto=r,_chimbalIsAberto=!0)}var w=new s(u,v);function y(){w.stop(),w=new s(u,v)}for(var k=0,E=ritmosNomes.length;k<E;k++)if(!1==ritmosNomes[k].includes("_")){let T=document.createElement("option");T.value=ritmosNomes[k],T.textContent+=ritmosNomes[k],_selecionarRitmoElem.appendChild(T)}function L(e){_trocarRitmo=!0;var t=document.getElementById("selectRitmo");selecionarRitmo(_ritmoSelecionado=""==e?t.value:t.value+"_"+e)}function x(e){let t=new a(u);t.mode="linearRampToValueAtTime";let n=d.getTrackerControls(),o;return t.setOptions(n),o=t.getGainNode(0),e.connect(o),o}function B(e){var t=document.getElementsByClassName("selecionadoDrum");if(t.length>0){var n=t[0];e==n?fazerViradaBateria():n.classList.toggle("selecionadoDrum",!1),""==e&&y()}if(""!=e){if("prato"==e.id){y();let o=m.prato1.get();x(o).connect(u.destination);let i=m.prato2.get();x(i).connect(u.destination),o.start(),i.start()}else if(""!=e){if(!w.running){let r;r=new S().getTrack(),w.measureLength=r.settings.measureLength,w.stop(),w.runSchedule(d.options.bpm)}e.classList.toggle("selecionadoDrum",!0)}}}function S(){this.setLocalStorage=function(e){var t={};t.Select="Select";for(var n=0,o=localStorage.length;n<o;++n){let r=localStorage.key(n);t[r]=r}var a=new i("load-storage","beat-list",t);e?a.update("beat-list",t):a.create()},this.getFilename=function(){let e=$("#filename").val();return e||(e="untitled"),e},this.getTrack=function(){let e=d.getTrackerControls(),t;return{beat:w.getTrackerValues(),settings:e}},this.alert=function(e){let t=document.getElementById("app-message");t.innerHTML=e,t.style.display="block",setTimeout(function(){t.style.display="none"},2e3)},this.setupStorage=function(){this.setLocalStorage(),document.getElementById("save").addEventListener("click",e=>{e.preventDefault();let t=JSON.stringify(this.getTrack()),n=this.getFilename();localStorage.setItem(n,t),this.setLocalStorage("update"),$("#beat-list").val(n),this.alert(`The track has been saved to local storage as <strong>${n}</strong>`)}),document.getElementById("saveAsJson").addEventListener("click",e=>{e.preventDefault();let t=JSON.stringify(this.getTrack()),n=this.getFilename();var o=new Blob([t],{type:"application/json"});l.saveAs(o,n+".json")}),$("#filename").bind("keypress keydown keyup",e=>{13==e.keyCode&&e.preventDefault()}),document.getElementById("beat-list").addEventListener("change",e=>{let t=$("#beat-list").val();if("Select"===t){document.getElementById("filename").value="";return}document.getElementById("filename").value=t;let n=JSON.parse(localStorage.getItem(t)),o=new r,i=document.getElementById("trackerControls");o.set(i,n.settings),d.setTrackerControls(n.settings),w.stop(),w.measureLength=n.settings.measureLength,f(u,n.settings.sampleSet,n)}),document.getElementById("delete").addEventListener("click",e=>{e.preventDefault();let t=document.getElementById("beat-list"),n=t.options[t.selectedIndex].text;localStorage.removeItem(n),document.getElementById("filename").value="",this.setLocalStorage("update"),this.alert("Track has been deleted")})}}$("#sampleSet").on("change",function(){f(u,this.value)})},{"./default-track":14,"./get-set-controls":15,"./simple-tracker":16,"adsr-gain-node":1,"file-saver":3,"get-set-form-values":5,"load-sample-set":7,"select-element":10}],14:[function(e,t,n){t.exports={beat:[{rowId:"0",colId:"0",enabled:!1},{rowId:"0",colId:"1",enabled:!1},{rowId:"0",colId:"2",enabled:!1},{rowId:"0",colId:"3",enabled:!1},{rowId:"0",colId:"4",enabled:!1},{rowId:"0",colId:"5",enabled:!1},{rowId:"0",colId:"6",enabled:!1},{rowId:"0",colId:"7",enabled:!1},{rowId:"1",colId:"0",enabled:!1},{rowId:"1",colId:"1",enabled:!1},{rowId:"1",colId:"2",enabled:!1},{rowId:"1",colId:"3",enabled:!1},{rowId:"1",colId:"4",enabled:!1},{rowId:"1",colId:"5",enabled:!1},{rowId:"1",colId:"6",enabled:!1},{rowId:"1",colId:"7",enabled:!1},{rowId:"2",colId:"0",enabled:!1},{rowId:"2",colId:"1",enabled:!1},{rowId:"2",colId:"2",enabled:!1},{rowId:"2",colId:"3",enabled:!1},{rowId:"2",colId:"4",enabled:!1},{rowId:"2",colId:"5",enabled:!1},{rowId:"2",colId:"6",enabled:!1},{rowId:"2",colId:"7",enabled:!1},{rowId:"3",colId:"0",enabled:!1},{rowId:"3",colId:"1",enabled:!1},{rowId:"3",colId:"2",enabled:!1},{rowId:"3",colId:"3",enabled:!1},{rowId:"3",colId:"4",enabled:!1},{rowId:"3",colId:"5",enabled:!1},{rowId:"3",colId:"6",enabled:!1},{rowId:"3",colId:"7",enabled:!1},{rowId:"4",colId:"0",enabled:!1},{rowId:"4",colId:"1",enabled:!1},{rowId:"4",colId:"2",enabled:!1},{rowId:"4",colId:"3",enabled:!1},{rowId:"4",colId:"4",enabled:!1},{rowId:"4",colId:"5",enabled:!1},{rowId:"4",colId:"6",enabled:!1},{rowId:"4",colId:"7",enabled:!1},{rowId:"5",colId:"0",enabled:!1},{rowId:"5",colId:"1",enabled:!1},{rowId:"5",colId:"2",enabled:!1},{rowId:"5",colId:"3",enabled:!1},{rowId:"5",colId:"4",enabled:!1},{rowId:"5",colId:"5",enabled:!1},{rowId:"5",colId:"6",enabled:!1},{rowId:"5",colId:"7",enabled:!1},{rowId:"6",colId:"0",enabled:!1},{rowId:"6",colId:"1",enabled:!1},{rowId:"6",colId:"2",enabled:!1},{rowId:"6",colId:"3",enabled:!1},{rowId:"6",colId:"4",enabled:!1},{rowId:"6",colId:"5",enabled:!1},{rowId:"6",colId:"6",enabled:!1},{rowId:"6",colId:"7",enabled:!1},{rowId:"7",colId:"0",enabled:!1},{rowId:"7",colId:"1",enabled:!1},{rowId:"7",colId:"2",enabled:!1},{rowId:"7",colId:"3",enabled:!1},{rowId:"7",colId:"4",enabled:!1},{rowId:"7",colId:"5",enabled:!1},{rowId:"7",colId:"6",enabled:!1},{rowId:"7",colId:"7",enabled:!1},{rowId:"8",colId:"0",enabled:!1},{rowId:"8",colId:"1",enabled:!1},{rowId:"8",colId:"2",enabled:!1},{rowId:"8",colId:"3",enabled:!1},{rowId:"8",colId:"4",enabled:!1},{rowId:"8",colId:"5",enabled:!1},{rowId:"8",colId:"6",enabled:!1},{rowId:"8",colId:"7",enabled:!1},{rowId:"9",colId:"0",enabled:!1},{rowId:"9",colId:"1",enabled:!1},{rowId:"9",colId:"2",enabled:!1},{rowId:"9",colId:"3",enabled:!1},{rowId:"9",colId:"4",enabled:!1},{rowId:"9",colId:"5",enabled:!1},{rowId:"9",colId:"6",enabled:!1},{rowId:"9",colId:"7",enabled:!1},{rowId:"10",colId:"0",enabled:!1},{rowId:"10",colId:"1",enabled:!1},{rowId:"10",colId:"2",enabled:!1},{rowId:"10",colId:"3",enabled:!1},{rowId:"10",colId:"4",enabled:!1},{rowId:"10",colId:"5",enabled:!1},{rowId:"10",colId:"6",enabled:!1},{rowId:"10",colId:"7",enabled:!1},{rowId:"11",colId:"0",enabled:!1},{rowId:"11",colId:"1",enabled:!1},{rowId:"11",colId:"2",enabled:!1},{rowId:"11",colId:"3",enabled:!1},{rowId:"11",colId:"4",enabled:!1},{rowId:"11",colId:"5",enabled:!1},{rowId:"11",colId:"6",enabled:!1},{rowId:"11",colId:"7",enabled:!1},{rowId:"12",colId:"0",enabled:!0},{rowId:"12",colId:"1",enabled:!0},{rowId:"12",colId:"2",enabled:!0},{rowId:"12",colId:"3",enabled:!0},{rowId:"12",colId:"4",enabled:!0},{rowId:"12",colId:"5",enabled:!0},{rowId:"12",colId:"6",enabled:!0},{rowId:"12",colId:"7",enabled:!0},{rowId:"13",colId:"0",enabled:!1},{rowId:"13",colId:"1",enabled:!1},{rowId:"13",colId:"2",enabled:!0},{rowId:"13",colId:"3",enabled:!1},{rowId:"13",colId:"4",enabled:!1},{rowId:"13",colId:"5",enabled:!1},{rowId:"13",colId:"6",enabled:!0},{rowId:"13",colId:"7",enabled:!1},{rowId:"14",colId:"0",enabled:!1},{rowId:"14",colId:"1",enabled:!1},{rowId:"14",colId:"2",enabled:!1},{rowId:"14",colId:"3",enabled:!1},{rowId:"14",colId:"4",enabled:!1},{rowId:"14",colId:"5",enabled:!1},{rowId:"14",colId:"6",enabled:!1},{rowId:"14",colId:"7",enabled:!1},{rowId:"15",colId:"0",enabled:!0},{rowId:"15",colId:"1",enabled:!1},{rowId:"15",colId:"2",enabled:!1},{rowId:"15",colId:"3",enabled:!1},{rowId:"15",colId:"4",enabled:!0},{rowId:"15",colId:"5",enabled:!1},{rowId:"15",colId:"6",enabled:!1},{rowId:"15",colId:"7",enabled:!1},],settings:{sampleSet:"./Sons/studio/samples.json",measureLength:16,bpm:90,detune:0,gainEnabled:"gain",attackAmp:0,sustainAmp:.4,decayAmp:.7,releaseAmp:1,attackTime:0,decayTime:0,sustainTime:2,releaseTime:2,adsrInterval:.1,delay:.01,filter:1e3}}},{}],15:[function(e,t,n){let o=e("get-set-form-values");t.exports=function e(){this.getTrackerControls=function(){let e=new o,t=document.getElementById("trackerControls"),n=e.get(t),i={};for(let r in n){if("delayEnabled"===r){i[r]="delay";continue}if("sampleSet"===r){i[r]=n[r];continue}i[r]=parseFloat(n[r])}return i},this.setTrackerControls=function(e){e||(e=this.getTrackerControls()),this.options=e}}},{"get-set-form-values":5}],16:[function(e,t,n){let o=e("waaclock"),i=e("./tracker-table"),r=e("has-class");t.exports=function e(t,n){this.measureLength=16,this.scheduleAudioBeat=n,this.scheduleForward=.1,this.current=0,this.eventMap={},this.clock=new o(t),this.clock.start(),this.running=!1,this.drawTracker=function(e,t,n){let o=new i;o.setRows(e,t,n);let r=o.getTable(),a=document.getElementById("tracker-parent");a.innerHTML="",a.insertAdjacentHTML("afterbegin",r)},this.next=function(){this.current++,this.current>=this.measureLength&&(this.current=0)},this.milliPerBeat=function(e){return e||(e=60),6e4/e},this.getTrackerRowValues=function(e){let t=[],n=`[data-col-id="${e}"]`;return document.querySelectorAll(n).forEach(e=>{let n=Object.assign({},e.dataset);n.enabled=e.classList.contains("tracker-enabled"),t.push(n)}),t},this.schedule=function(){let e=this.getTrackerRowValues(this.current),n=t.currentTime;e.forEach(e=>{this.scheduleBeat(e,n)})},this.scheduleBeat=function(e,t){let n=t+this.scheduleForward;this.scheduleMap[e.colId]=n,e.enabled&&(""!=_viradaRitmo&&(_trocarRitmo=!0,selecionarRitmo(_viradaRitmo,!0)),0==e.colId&&(selecionarRitmo(_ritmoSelecionado),_viradaRitmo=""),this.eventMap[this.getEventKey(e)]=this.clock.callbackAtTime(()=>{this.scheduleAudioBeat(e,n)},t))},this.scheduleMap={},this.scheduleAudioBeatNow=function(e){if(e.enabled){let n=this.eventMap[this.getEventKey(e)];n&&(n.clear(),delete this.eventMap[this.getEventKey(e)]);return}let o=this.scheduleMap[0]+e.colId*this.milliPerBeat(this.bpm)/1e3,i=t.currentTime;this.eventMap[this.getEventKey(e)]=this.clock.callbackAtTime(()=>{this.scheduleAudioBeat(e,o)},i)},this.interval,this.runSchedule=function(e){e*=4,this.running=!0,this.bpm=e;let t=this.milliPerBeat(e);setTimeout(()=>{this.schedule(),this.next()},0),this.interval=setInterval(()=>{this.schedule(),this.next()},t)},this.stop=function(){this.running=!1,clearInterval(this.interval)},this.getEventKey=function e(t){return t.rowId+t.colId},this.getTrackerValues=function(){let e=[];return document.querySelectorAll(".tracker-cell").forEach(function(t){let n=Object.assign({},t.dataset);n.enabled=r(t,"tracker-enabled"),e.push(n)}),e},this.loadTrackerValues=function(e){document.querySelectorAll(".tracker-enabled").forEach(function(e){e.classList.remove("tracker-enabled")}),e.forEach(function(e){if(!0===e.enabled){let t=`.tracker-cell[data-row-id="${e.rowId}"][data-col-id="${e.colId}"]`,n=document.querySelector(t);n&&n.classList.add("tracker-enabled")}})},this.setupEvents=function(){document.querySelectorAll(".tracker-cell").forEach(function(e){e.addEventListener("click",function(e){let t=Object.assign({},e.target.dataset);t.enabled=r(e.target,"tracker-enabled");let n=e.target.dataset.colId;t.colId>n&&this.scheduleAudioBeatNow(t),e.target.classList.toggle("tracker-enabled")})})}}},{"./tracker-table":17,"has-class":6,waaclock:11}],17:[function(e,t,n){t.exports=function e(){this.str="",this.getTable=function(){return'<table id="tracker-table">'+this.str+"</table>"},this.setHeader=function(e,t){this.str+='<tr class="tracker-row header">',this.str+=this.getCells("header",e,{header:!0}),this.str+="</tr>"},this.setRows=function(e,t,n){this.setHeader(t,n);for(let o=0;o<e;o++)this.str+=`<tr class="tracker-row" data-id="${o}">`,this.str+=this.getCells(o,t,n),this.str+="</tr>"},this.getFirstCell=function(e,n){t++;var o="";return o+=`<td class="tracker-first-cell" data-row-id="${e}">`,n.title&&(o+=n.title[e]),o+="</td>"};var t=0;this.getCells=function(e,n,o){var i="",r="";i+=this.getFirstCell(e,o);let a="tracker-cell";"header"==e&&(a="tracker-cell-header");for(let s=0;s<n;s++)i+=`<td class="${a}" data-row-id="${e}" data-col-id="${s}">${r="tracker-cell"==a?t:""}`,t++,o.header&&(i+=s+1),i+="</td>";return i}}},{}],18:[function(e,t,n){var o,i,r,a=t.exports={};function s(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function c(e){if(o===setTimeout)return setTimeout(e,0);if((o===s||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(n){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:s}catch(e){o=s}try{i="function"==typeof clearTimeout?clearTimeout:l}catch(t){i=l}}();var d=[],u=!1,h=-1;function f(){u&&r&&(u=!1,r.length?d=r.concat(d):h=-1,d.length&&m())}function m(){if(!u){var e=c(f);u=!0;for(var t=d.length;t;){for(r=d,d=[];++h<t;)r&&r[h].run();h=-1,t=d.length}r=null,u=!1,function e(t){if(i===clearTimeout)return clearTimeout(t);if((i===l||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(n){try{return i.call(null,t)}catch(o){return i.call(this,t)}}}(e)}}function I(e,t){this.fun=e,this.array=t}function p(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new I(e,t)),1!==d.length||u||c(m)},I.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},{}]},{},[13]);