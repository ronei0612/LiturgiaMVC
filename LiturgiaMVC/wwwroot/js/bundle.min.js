const ritmosNomes=Object.keys(ritmosJson);var _ritmoSelecionado="aro";!function e(t,n,i){function s(o,a){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(r)return r(o,!0);var l=Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n;return s(t[o][1][e]||e)},h,h.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,t,n){t.exports=function e(t){this.ctx=t,this.mode="exponentialRampToValueAtTime",this.options={attackAmp:.1,decayAmp:.3,sustainAmp:.7,releaseAmp:.01,attackTime:.1,decayTime:.2,sustainTime:1,releaseTime:3.4,autoRelease:!0},this.setOptions=function(e){this.options=Object.assign(this.options,e)},this.gainNode,this.audioTime,this.getGainNode=e=>(this.gainNode=this.ctx.createGain(),this.audioTime=e,this.gainNode.gain.setValueAtTime(1e-7,e),this.gainNode.gain[this.mode](this.options.attackAmp,e+this.options.attackTime),this.gainNode.gain[this.mode](this.options.decayAmp,e+this.options.attackTime+this.options.decayTime),this.gainNode.gain[this.mode](this.options.sustainAmp,e+this.options.attackTime+this.options.sustainTime),this.options.autoRelease&&(this.gainNode.gain[this.mode](this.options.releaseAmp,e+this.releaseTime()),this.disconnect(e+this.releaseTime())),this.gainNode),this.releaseNow=()=>{this.gainNode.gain[this.mode](this.options.releaseAmp,this.ctx.currentTime+this.options.releaseTime),this.disconnect(this.options.releaseTime)},this.releaseTime=function(){return this.options.attackTime+this.options.decayTime+this.options.sustainTime+this.options.releaseTime},this.releaseTimeNow=function(){return this.ctx.currentTime+this.releaseTime()},this.disconnect=e=>{setTimeout(()=>{this.gainNode.disconnect()},1e3*e)}}},{}],2:[function(e,t,n){function i(e,t){this.context=e,this.buffer=t}i.prototype.setup=function(){this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.context.destination)},i.prototype.get=function(){return this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source},i.prototype.trigger=function(e){this.setup(),this.source.start(e)},t.exports=i},{}],3:[function(e,t,n){/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */ },{}],4:[function(e,t,n){t.exports=function e(t){return new Promise((e,n)=>{var i=new XMLHttpRequest;i.open("get",t,!0),i.responseType="text",i.onload=function(){if(200===i.status)try{e(JSON.parse(i.responseText))}catch(s){n(s)}else n("JSON could not be loaded "+t)},i.send()})}},{}],5:[function(e,t,n){function i(e){var t=e.elements,n={},i=0,s=null;for(i=0;i<t.length;i+=1)switch((s=t[i]).type){case"submit":break;case"radio":case"checkbox":s.checked&&(n[s.name]=s.value);break;case"select-multiple":var r=o(s);r.length>0&&(n[s.name]=r);break;default:void 0!==s.value&&(n[s.name]=s.value)}return n}function s(e,t){var n=e.elements,i=0,s=null;for(i=0;i<n.length;i+=1)switch((s=n[i]).type){case"submit":break;case"radio":case"checkbox":t[s.name]===s.value?s.checked=!0:s.checked=!1;break;case"select-multiple":t[s.name]&&r(s,t[s.name]);break;default:void 0!==t[s.name]&&(s.value=t[s.name])}}function r(e,t){for(var n,i=e.options,s=0,r=i.length;s<r;s++)n=i[s],t.indexOf(n.value)>-1?n.selected=!0:n.selected=!1}function o(e){for(var t,n=[],i=e&&e.options,s=0,r=i.length;s<r;s++)(t=i[s]).selected&&n.push(t.value||t.text);return n}t.exports=function e(){this.set=s,this.get=i}},{}],6:[function(e,t,n){"use strict";var i=e("obj-type");t.exports=function(e,t){if(-1===i(e).indexOf("element"))throw TypeError("Expected an HTML DOM element as first argument");if("string"!=typeof t)throw TypeError("Expected a string as second argument");return e.classList?e.classList.contains(t):RegExp("(^| )"+t+"( |$)","gi").test(e.className)}},{"obj-type":9}],7:[function(e,t,n){var i=e("tiny-sample-loader"),s=e("audio-buffer-instrument"),r=e("get-json-promise"),o={};t.exports=function e(t,n){var a,c;return a=t,c=n,new Promise((e,t)=>{r(c).then(function(t){var n,r,c,l;Promise.all((n=a,c=(r=t).samples,l=[],r.filename=[],r.files.forEach(function(e){var t=e.replace(/\.[^/.]+$/,"");r.filename.push(t);let a=i(n,c+e);a.then(function(e){o[t]=new s(n,e)}),l.push(a)}),l)).then(function(){e({data:t,buffers:o})}).catch(function(e){console.log(e)})}).catch(function(e){t(e)})})}},{"audio-buffer-instrument":2,"get-json-promise":4,"tiny-sample-loader":8}],8:[function(e,t,n){t.exports=function e(t,n){return new Promise((e,i)=>{var s=new XMLHttpRequest;s.open("get",n,!0),s.responseType="arraybuffer",s.onload=function(){200===s.status?t.decodeAudioData(s.response,function(t){e(t)}):i("tiny-sample-loader request failed")},s.send()})}},{}],9:[function(e,t,n){"use strict";t.exports=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()}},{}],10:[function(e,t,n){t.exports=function e(t,n,i,s){this.appendToID=t,this.selectID=n,this.options=i,this.selected=s,this.selectList,this.create=function(e){var t=document.getElementById(this.appendToID);this.selectList=document.createElement("select"),this.selectList.id=this.selectID,t.appendChild(this.selectList),this.update(n,this.options,this.selected)},this.onChange=function(e){this.selectList.addEventListener("change",function(){e(this.value)})},this.update=function(e,t,n){this.delete(e);var i=document.getElementById(e);for(var s in t){var r=document.createElement("option");r.value=s,r.text=t[s],i.appendChild(r),s===n&&r.setAttribute("selected",!0)}},this.getSelected=function(e){for(var t,n=document.getElementById(e),i=0,s=n.options.length;i<s;i++)if(!0===(t=n.options[i]).selected)return t.value;return!1},this.delete=function(e){var t=document.getElementById(e);for(var n in t)t.remove(n)},this.getAsString=function(){return document.getElementById(this.appendToID).outerHTML}}},{}],11:[function(e,t,n){var i=e("./lib/WAAClock");t.exports=i,"undefined"!=typeof window&&(window.WAAClock=i)},{"./lib/WAAClock":12}],12:[function(e,t,n){(function(e){var n={toleranceLate:.1,toleranceEarly:.001},i=function(e,t,n){this.clock=e,this.func=n,this._cleared=!1,this.toleranceLate=e.toleranceLate,this.toleranceEarly=e.toleranceEarly,this._latestTime=null,this._earliestTime=null,this.deadline=null,this.repeatTime=null,this.schedule(t)};i.prototype.clear=function(){return this.clock._removeEvent(this),this._cleared=!0,this},i.prototype.repeat=function(e){if(0===e)throw Error("delay cannot be 0");return this.repeatTime=e,this.clock._hasEvent(this)||this.schedule(this.deadline+this.repeatTime),this},i.prototype.tolerance=function(e){return"number"==typeof e.late&&(this.toleranceLate=e.late),"number"==typeof e.early&&(this.toleranceEarly=e.early),this._refreshEarlyLateDates(),this.clock._hasEvent(this)&&(this.clock._removeEvent(this),this.clock._insertEvent(this)),this},i.prototype.isRepeated=function(){return null!==this.repeatTime},i.prototype.schedule=function(e){this._cleared=!1,this.deadline=e,this._refreshEarlyLateDates(),this.clock.context.currentTime>=this._earliestTime?this._execute():(this.clock._hasEvent(this)&&this.clock._removeEvent(this),this.clock._insertEvent(this))},i.prototype.timeStretch=function(e,t){this.isRepeated()&&(this.repeatTime=this.repeatTime*t);var n=e+t*(this.deadline-e);if(this.isRepeated())for(;this.clock.context.currentTime>=n-this.toleranceEarly;)n+=this.repeatTime;this.schedule(n)},i.prototype._execute=function(){!1!==this.clock._started&&(this.clock._removeEvent(this),this.clock.context.currentTime<this._latestTime?this.func(this):(this.onexpired&&this.onexpired(this),console.warn("event expired")),!this.clock._hasEvent(this)&&this.isRepeated()&&!this._cleared&&this.schedule(this.deadline+this.repeatTime))},i.prototype._refreshEarlyLateDates=function(){this._latestTime=this.deadline+this.toleranceLate,this._earliestTime=this.deadline-this.toleranceEarly};var s=t.exports=function(e,t){t=t||{},this.tickMethod=t.tickMethod||"ScriptProcessorNode",this.toleranceEarly=t.toleranceEarly||n.toleranceEarly,this.toleranceLate=t.toleranceLate||n.toleranceLate,this.context=e,this._events=[],this._started=!1};s.prototype.setTimeout=function(e,t){return this._createEvent(e,this._absTime(t))},s.prototype.callbackAtTime=function(e,t){return this._createEvent(e,t)},s.prototype.timeStretch=function(e,t,n){return t.forEach(function(t){t.timeStretch(e,n)}),t},s.prototype.start=function(){if(!1===this._started){var t=this;if(this._started=!0,this._events=[],"ScriptProcessorNode"===this.tickMethod)this._clockNode=this.context.createScriptProcessor(256,1,1),this._clockNode.connect(this.context.destination),this._clockNode.onaudioprocess=function(){e.nextTick(function(){t._tick()})};else if("manual"===this.tickMethod);else throw Error("invalid tickMethod "+this.tickMethod)}},s.prototype.stop=function(){!0===this._started&&(this._started=!1,this._clockNode.disconnect())},s.prototype._tick=function(){for(var e=this._events.shift();e&&e._earliestTime<=this.context.currentTime;)e._execute(),e=this._events.shift();e&&this._events.unshift(e)},s.prototype._createEvent=function(e,t){return new i(this,t,e)},s.prototype._insertEvent=function(e){this._events.splice(this._indexByTime(e._earliestTime),0,e)},s.prototype._removeEvent=function(e){var t=this._events.indexOf(e);-1!==t&&this._events.splice(t,1)},s.prototype._hasEvent=function(e){return -1!==this._events.indexOf(e)},s.prototype._indexByTime=function(e){for(var t,n=0,i=this._events.length;n<i;)t=Math.floor((n+i)/2),this._events[t]._earliestTime<e?n=t+1:i=t;return n},s.prototype._absTime=function(e){return e+this.context.currentTime},s.prototype._relTime=function(e){return e-this.context.currentTime}}).call(this,e("_process"))},{_process:18}],13:[function(e,t,n){let i=e("load-sample-set"),s=e("select-element"),r=e("get-set-form-values"),o=e("adsr-gain-node"),a=e("./simple-tracker"),c=e("./get-set-controls"),l=new c,h=new AudioContext,u=e("./default-track");function d(e,t,n){i(e,t).then(function(e){f=e.buffers,sampleData=e.data,n||(n=m.getTrack()),n.settings.measureLength||(n.settings.measureLength=16),p=sampleData,v(sampleData,n.settings.measureLength),y.loadTrackerValues(n.beat),y.setupEvents()})}window.onload=function(){let e=new r,t=document.getElementById("trackerControls");e.set(t,u.settings),l.setTrackerControls(u.settings),d(h,u.settings.sampleSet,u),function e(){function t(e,t,n){verificarETocarBateria_2(e,t,n)&&(T(document.activeElement),mudarRitmo(e))}selectRitmo.addEventListener("change",function(e){var t=document.getElementsByClassName("selecionadoDrum");t.length>0&&t[0].classList.toggle("selecionadoDrum",!1),selecionarRitmo(document.activeElement.value)}),aro.addEventListener("mousedown",function(e){t("aro",!1)}),meiaLua.addEventListener("mousedown",function(e){t("meiaLua",!0,"stringsSolo")}),caixa.addEventListener("mousedown",function(e){t("",!1)}),brush.addEventListener("mousedown",function(e){t("brush",!1)}),ride.addEventListener("mousedown",function(e){t("ride",!0,"stringsSolo")}),chimbal.addEventListener("mousedown",function(e){t("chimbal",!0,"stringsSolo")}),playPauseBateria.addEventListener("mousedown",function(e){"none"!==tunerDiv.style.display&&(autoTunerCheck.checked=!1,pararOsAcordes()),T()}),prato.addEventListener("mousedown",function(e){if("none"==iconVolumeMute.style.display){var t;let n=f.prato1.get(),i,s,r;(t=n,(i=new o(h)).mode="linearRampToValueAtTime",s=l.getTrackerControls(),i.setOptions(s),r=i.getGainNode(0),t.connect(r),r).connect(h.destination),n.start()}}),bpm.addEventListener("change",function(e){var t=bpmRange.value;t=6e4/t,24==measureLength.value&&(t/=2),lightCompasso.style.animation="blink "+t+"ms infinite",l.options.bpm=bpmRange.value,y.running&&(y.stop(),y.runSchedule(l.options.bpm))}),bpmRange.addEventListener("input",function(e){bpm.value=bpmRange.value,bpm.dispatchEvent(eventoChange)}),measureLength.addEventListener("change",e=>{let t=parseInt(document.getElementById("measureLength").value);if(t<1)return;y.measureLength=t;let n=y.getTrackerValues();v(p,t),y.measureLength=t,y.loadTrackerValues(n),y.setupEvents()}),$(".base").on("change",function(){l.setTrackerControls()})}(),(m=new _).setupStorage()};var f,p,m,g={};function v(e,t){(g=e).title=g.filename,y.drawTracker(e.filename.length,t,g)}function k(e,t){var n,i;let s=g.filename[e],r=f[s].get(),a,c,u;(i=n=r,a=new o(h),a.mode="linearRampToValueAtTime",c=l.getTrackerControls(),a.setOptions(c),u=a.getGainNode(t),i.connect(u),u).connect(h.destination),fecharChimbal(s,_sourceChimbalAberto,t),n.start(t),guardarChimbalAberto(s,r)}var y=new a(h,k);function T(e=null){if(e){if(!y.running){let t;t=new _().getTrack(),y.measureLength=t.settings.measureLength,y.stop(),y.runSchedule(l.options.bpm)}}else _autoMudarRitmo&&y.running&&prato.dispatchEvent(eventoMousedown),y.stop(),y=new a(h,k)}function _(){this.setLocalStorage=function(e){var t={};t.Select="Select";for(var n=0,i=localStorage.length;n<i;++n){let r=localStorage.key(n);t[r]=r}var o=new s("load-storage","beat-list",t);e?o.update("beat-list",t):o.create()},this.getFilename=function(){let e=$("#filename").val();return e||(e="untitled"),e},this.getTrack=function(){let e=l.getTrackerControls(),t;return{beat:y.getTrackerValues(),settings:e}},this.alert=function(e){let t=document.getElementById("app-message");t.innerHTML=e,t.style.display="block",setTimeout(function(){t.style.display="none"},2e3)},this.setupStorage=function(){this.setLocalStorage()}}gerarRitmosNomes(ritmosNomes),$("#sampleSet").on("change",function(){d(h,this.value)})},{"./default-track":14,"./get-set-controls":15,"./simple-tracker":16,"adsr-gain-node":1,"file-saver":3,"get-set-form-values":5,"load-sample-set":7,"select-element":10}],14:[function(e,t,n){t.exports={beat:[{rowId:"0",colId:"0",enabled:!1},],settings:{sampleSet:"./Sons/studio/samples.json",measureLength:16,bpm:92,detune:0,gainEnabled:"gain",attackAmp:0,sustainAmp:.4,decayAmp:.7,releaseAmp:1,attackTime:0,decayTime:0,sustainTime:2,releaseTime:2,adsrInterval:.1,delay:.01,filter:1e3}}},{}],15:[function(e,t,n){e("get-set-form-values");let i=JSON.parse('{ "": 92, "adsrInterval": 0.1, "attackTime": 0, "bpm": 92, "decayAmp": 0.7, "decayTime": 0, "delay": 0.01, "filter": 1000, "releaseAmp": 1, "releaseTime": 2, "sustainAmp": 0.4, "sustainTime": 2 }');t.exports=function e(){this.getTrackerControls=function(){return i},this.setTrackerControls=function(e){e||(e=this.getTrackerControls()),this.options=e}}},{"get-set-form-values":5}],16:[function(e,t,n){let i=e("waaclock"),s=e("./tracker-table"),r=e("has-class");t.exports=function e(t,n){this.measureLength=16,this.scheduleAudioBeat=n,this.scheduleForward=.1,this.current=0,this.eventMap={},this.clock=new i(t),this.clock.start(),this.running=!1,this.drawTracker=function(e,t,n){let i=new s;i.setRows(e,t,n);let r=i.getTable(),o=document.getElementById("tracker-parent");o.innerHTML="",o.insertAdjacentHTML("afterbegin",r)},this.next=function(){this.current++,this.current>=this.measureLength&&(this.current=0)},this.milliPerBeat=function(e){return e||(e=60),6e4/e},this.getTrackerRowValues=function(e){let t=[],n=`[data-col-id="${e}"]`;return document.querySelectorAll(n).forEach(e=>{let n=Object.assign({},e.dataset);n.enabled=e.classList.contains("tracker-enabled"),t.push(n)}),t},this.schedule=function(){let e=this.getTrackerRowValues(this.current),n=t.currentTime;e.forEach(e=>{this.scheduleBeat(e,n)})},this.scheduleBeat=function(e,t){let n=t+this.scheduleForward;this.scheduleMap[e.colId]=n,e.enabled&&(""!=_viradaRitmo&&(_trocarRitmo=!0,selecionarRitmo(_viradaRitmo,!0)),0==e.colId&&(selecionarRitmo(_ritmoSelecionado),_viradaRitmo=""),this.eventMap[this.getEventKey(e)]=this.clock.callbackAtTime(()=>{this.scheduleAudioBeat(e.rowId,n)},t))},this.scheduleMap={},this.scheduleAudioBeatNow=function(e){if(e.enabled){let n=this.eventMap[this.getEventKey(e)];n&&(n.clear(),delete this.eventMap[this.getEventKey(e)]);return}let i=this.scheduleMap[0]+e.colId*this.milliPerBeat(this.bpm)/1e3,s=t.currentTime;this.eventMap[this.getEventKey(e)]=this.clock.callbackAtTime(()=>{this.scheduleAudioBeat(e.rowId,i)},s)},this.interval,this.runSchedule=function(e){e*=4,this.running=!0,this.bpm=e;let t=this.milliPerBeat(e);setTimeout(()=>{this.schedule(),this.next()},0),this.interval=setInterval(()=>{this.schedule(),this.next()},t)},this.stop=function(){this.running=!1,clearInterval(this.interval)},this.getEventKey=function e(t){return t.rowId+t.colId},this.getTrackerValues=function(){let e=[];return document.querySelectorAll(".tracker-cell").forEach(function(t){let n=Object.assign({},t.dataset);n.enabled=r(t,"tracker-enabled"),e.push(n)}),e},this.loadTrackerValues=function(e){document.querySelectorAll(".tracker-enabled").forEach(function(e){e.classList.remove("tracker-enabled")}),e.forEach(function(e){if(!0===e.enabled){let t=`.tracker-cell[data-row-id="${e.rowId}"][data-col-id="${e.colId}"]`,n=document.querySelector(t);n&&n.classList.add("tracker-enabled")}})},this.setupEvents=function(){document.querySelectorAll(".tracker-cell").forEach(function(e){e.addEventListener("click",function(e){let t=Object.assign({},e.target.dataset);t.enabled=r(e.target,"tracker-enabled");let n=e.target.dataset.colId;t.colId>n&&this.scheduleAudioBeatNow(t),e.target.classList.toggle("tracker-enabled")})})}}},{"./tracker-table":17,"has-class":6,waaclock:11}],17:[function(e,t,n){t.exports=function e(){this.str="",this.getTable=function(){return'<table id="tracker-table">'+this.str+"</table>"},this.setHeader=function(e,t){this.str+='<tr class="tracker-row header">',this.str+=this.getCells("header",e,{header:!0}),this.str+="</tr>"},this.setRows=function(e,t,n){this.setHeader(t,n);for(let i=0;i<e;i++)this.str+=`<tr class="tracker-row" data-id="${i}">`,this.str+=this.getCells(i,t,n),this.str+="</tr>"},this.getFirstCell=function(e,n){t++;var i="";return i+=`<td class="tracker-first-cell" data-row-id="${e}">`,n.title&&(i+=n.title[e]),i+="</td>"};var t=0;this.getCells=function(e,n,i){var s="",r="";s+=this.getFirstCell(e,i);let o="tracker-cell";"header"==e&&(o="tracker-cell-header");for(let a=0;a<n;a++)s+=`<td class="${o}" data-row-id="${e}" data-col-id="${a}">${r="tracker-cell"==o?t:""}`,t++,i.header&&(s+=a+1),s+="</td>";return s}}},{}],18:[function(e,t,n){var i,s,r,o=t.exports={};function a(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(n){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{s="function"==typeof clearTimeout?clearTimeout:c}catch(t){s=c}}();var h=[],u=!1,d=-1;function f(){u&&r&&(u=!1,r.length?h=r.concat(h):d=-1,h.length&&p())}function p(){if(!u){var e=l(f);u=!0;for(var t=h.length;t;){for(r=h,h=[];++d<t;)r&&r[d].run();d=-1,t=h.length}r=null,u=!1,function e(t){if(s===clearTimeout)return clearTimeout(t);if((s===c||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{return s(t)}catch(n){try{return s.call(null,t)}catch(i){return s.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new m(e,t)),1!==h.length||u||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}},{}]},{},[13]);