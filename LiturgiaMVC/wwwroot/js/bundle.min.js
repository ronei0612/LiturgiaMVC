const ritmosNomes=Object.keys(ritmosJson);var _ritmoSelecionado="aro";!function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n;return i(t[s][1][e]||e)},d,d.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){t.exports=function e(t){this.ctx=t,this.mode="exponentialRampToValueAtTime",this.options={attackAmp:.1,decayAmp:.3,sustainAmp:.7,releaseAmp:.01,attackTime:.1,decayTime:.2,sustainTime:1,releaseTime:3.4,autoRelease:!0},this.setOptions=function(e){this.options=Object.assign(this.options,e)},this.gainNode,this.audioTime,this.getGainNode=e=>(this.gainNode=this.ctx.createGain(),this.audioTime=e,this.gainNode.gain.setValueAtTime(1e-7,e),this.gainNode.gain[this.mode](this.options.attackAmp,e+this.options.attackTime),this.gainNode.gain[this.mode](this.options.decayAmp,e+this.options.attackTime+this.options.decayTime),this.gainNode.gain[this.mode](this.options.sustainAmp,e+this.options.attackTime+this.options.sustainTime),this.options.autoRelease&&(this.gainNode.gain[this.mode](this.options.releaseAmp,e+this.releaseTime()),this.disconnect(e+this.releaseTime())),this.gainNode),this.releaseNow=()=>{this.gainNode.gain[this.mode](this.options.releaseAmp,this.ctx.currentTime+this.options.releaseTime),this.disconnect(this.options.releaseTime)},this.releaseTime=function(){return this.options.attackTime+this.options.decayTime+this.options.sustainTime+this.options.releaseTime},this.releaseTimeNow=function(){return this.ctx.currentTime+this.releaseTime()},this.disconnect=e=>{setTimeout(()=>{this.gainNode.disconnect()},1e3*e)}}},{}],2:[function(e,t,n){function o(e,t){this.context=e,this.buffer=t}o.prototype.setup=function(){this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.context.destination)},o.prototype.get=function(){return this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source},o.prototype.trigger=function(e){this.setup(),this.source.start(e)},t.exports=o},{}],3:[function(e,t,n){/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */ },{}],4:[function(e,t,n){t.exports=function e(t){return new Promise((e,n)=>{var o=new XMLHttpRequest;o.open("get",t,!0),o.responseType="text",o.onload=function(){if(200===o.status)try{e(JSON.parse(o.responseText))}catch(i){n(i)}else n("JSON could not be loaded "+t)},o.send()})}},{}],5:[function(e,t,n){function o(e){var t=e.elements,n={},o=0,i=null;for(o=0;o<t.length;o+=1)switch((i=t[o]).type){case"submit":break;case"radio":case"checkbox":i.checked&&(n[i.name]=i.value);break;case"select-multiple":var r=s(i);r.length>0&&(n[i.name]=r);break;default:void 0!==i.value&&(n[i.name]=i.value)}return n}function i(e,t){var n=e.elements,o=0,i=null;for(o=0;o<n.length;o+=1)switch((i=n[o]).type){case"submit":break;case"radio":case"checkbox":t[i.name]===i.value?i.checked=!0:i.checked=!1;break;case"select-multiple":t[i.name]&&r(i,t[i.name]);break;default:void 0!==t[i.name]&&(i.value=t[i.name])}}function r(e,t){for(var n,o=e.options,i=0,r=o.length;i<r;i++)n=o[i],t.indexOf(n.value)>-1?n.selected=!0:n.selected=!1}function s(e){for(var t,n=[],o=e&&e.options,i=0,r=o.length;i<r;i++)(t=o[i]).selected&&n.push(t.value||t.text);return n}t.exports=function e(){this.set=i,this.get=o}},{}],6:[function(e,t,n){"use strict";var o=e("obj-type");t.exports=function(e,t){if(-1===o(e).indexOf("element"))throw TypeError("Expected an HTML DOM element as first argument");if("string"!=typeof t)throw TypeError("Expected a string as second argument");return e.classList?e.classList.contains(t):RegExp("(^| )"+t+"( |$)","gi").test(e.className)}},{"obj-type":9}],7:[function(e,t,n){var o=e("tiny-sample-loader"),i=e("audio-buffer-instrument"),r=e("get-json-promise"),s={};t.exports=function e(t,n){var a,l;return a=t,l=n,new Promise((e,t)=>{r(l).then(function(t){var n,r,l,c;Promise.all((n=a,l=(r=t).samples,c=[],r.filename=[],r.files.forEach(function(e){var t=e.replace(/\.[^/.]+$/,"");r.filename.push(t);let a=o(n,l+e);a.then(function(e){s[t]=new i(n,e)}),c.push(a)}),c)).then(function(){e({data:t,buffers:s})}).catch(function(e){console.log(e)})}).catch(function(e){t(e)})})}},{"audio-buffer-instrument":2,"get-json-promise":4,"tiny-sample-loader":8}],8:[function(e,t,n){t.exports=function e(t,n){return new Promise((e,o)=>{var i=new XMLHttpRequest;i.open("get",n,!0),i.responseType="arraybuffer",i.onload=function(){200===i.status?t.decodeAudioData(i.response,function(t){e(t)}):o("tiny-sample-loader request failed")},i.send()})}},{}],9:[function(e,t,n){"use strict";t.exports=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()}},{}],10:[function(e,t,n){t.exports=function e(t,n,o,i){this.appendToID=t,this.selectID=n,this.options=o,this.selected=i,this.selectList,this.create=function(e){var t=document.getElementById(this.appendToID);this.selectList=document.createElement("select"),this.selectList.id=this.selectID,t.appendChild(this.selectList),this.update(n,this.options,this.selected)},this.onChange=function(e){this.selectList.addEventListener("change",function(){e(this.value)})},this.update=function(e,t,n){this.delete(e);var o=document.getElementById(e);for(var i in t){var r=document.createElement("option");r.value=i,r.text=t[i],o.appendChild(r),i===n&&r.setAttribute("selected",!0)}},this.getSelected=function(e){for(var t,n=document.getElementById(e),o=0,i=n.options.length;o<i;o++)if(!0===(t=n.options[o]).selected)return t.value;return!1},this.delete=function(e){var t=document.getElementById(e);for(var n in t)t.remove(n)},this.getAsString=function(){return document.getElementById(this.appendToID).outerHTML}}},{}],11:[function(e,t,n){var o=e("./lib/WAAClock");t.exports=o,"undefined"!=typeof window&&(window.WAAClock=o)},{"./lib/WAAClock":12}],12:[function(e,t,n){(function(e){var n={toleranceLate:.1,toleranceEarly:.001},o=function(e,t,n){this.clock=e,this.func=n,this._cleared=!1,this.toleranceLate=e.toleranceLate,this.toleranceEarly=e.toleranceEarly,this._latestTime=null,this._earliestTime=null,this.deadline=null,this.repeatTime=null,this.schedule(t)};o.prototype.clear=function(){return this.clock._removeEvent(this),this._cleared=!0,this},o.prototype.repeat=function(e){if(0===e)throw Error("delay cannot be 0");return this.repeatTime=e,this.clock._hasEvent(this)||this.schedule(this.deadline+this.repeatTime),this},o.prototype.tolerance=function(e){return"number"==typeof e.late&&(this.toleranceLate=e.late),"number"==typeof e.early&&(this.toleranceEarly=e.early),this._refreshEarlyLateDates(),this.clock._hasEvent(this)&&(this.clock._removeEvent(this),this.clock._insertEvent(this)),this},o.prototype.isRepeated=function(){return null!==this.repeatTime},o.prototype.schedule=function(e){this._cleared=!1,this.deadline=e,this._refreshEarlyLateDates(),this.clock.context.currentTime>=this._earliestTime?this._execute():(this.clock._hasEvent(this)&&this.clock._removeEvent(this),this.clock._insertEvent(this))},o.prototype.timeStretch=function(e,t){this.isRepeated()&&(this.repeatTime=this.repeatTime*t);var n=e+t*(this.deadline-e);if(this.isRepeated())for(;this.clock.context.currentTime>=n-this.toleranceEarly;)n+=this.repeatTime;this.schedule(n)},o.prototype._execute=function(){!1!==this.clock._started&&(this.clock._removeEvent(this),this.clock.context.currentTime<this._latestTime?this.func(this):(this.onexpired&&this.onexpired(this),console.warn("event expired")),!this.clock._hasEvent(this)&&this.isRepeated()&&!this._cleared&&this.schedule(this.deadline+this.repeatTime))},o.prototype._refreshEarlyLateDates=function(){this._latestTime=this.deadline+this.toleranceLate,this._earliestTime=this.deadline-this.toleranceEarly};var i=t.exports=function(e,t){t=t||{},this.tickMethod=t.tickMethod||"ScriptProcessorNode",this.toleranceEarly=t.toleranceEarly||n.toleranceEarly,this.toleranceLate=t.toleranceLate||n.toleranceLate,this.context=e,this._events=[],this._started=!1};i.prototype.setTimeout=function(e,t){return this._createEvent(e,this._absTime(t))},i.prototype.callbackAtTime=function(e,t){return this._createEvent(e,t)},i.prototype.timeStretch=function(e,t,n){return t.forEach(function(t){t.timeStretch(e,n)}),t},i.prototype.start=function(){if(!1===this._started){var t=this;if(this._started=!0,this._events=[],"ScriptProcessorNode"===this.tickMethod)this._clockNode=this.context.createScriptProcessor(256,1,1),this._clockNode.connect(this.context.destination),this._clockNode.onaudioprocess=function(){e.nextTick(function(){t._tick()})};else if("manual"===this.tickMethod);else throw Error("invalid tickMethod "+this.tickMethod)}},i.prototype.stop=function(){!0===this._started&&(this._started=!1,this._clockNode.disconnect())},i.prototype._tick=function(){for(var e=this._events.shift();e&&e._earliestTime<=this.context.currentTime;)e._execute(),e=this._events.shift();e&&this._events.unshift(e)},i.prototype._createEvent=function(e,t){return new o(this,t,e)},i.prototype._insertEvent=function(e){this._events.splice(this._indexByTime(e._earliestTime),0,e)},i.prototype._removeEvent=function(e){var t=this._events.indexOf(e);-1!==t&&this._events.splice(t,1)},i.prototype._hasEvent=function(e){return -1!==this._events.indexOf(e)},i.prototype._indexByTime=function(e){for(var t,n=0,o=this._events.length;n<o;)t=Math.floor((n+o)/2),this._events[t]._earliestTime<e?n=t+1:o=t;return n},i.prototype._absTime=function(e){return e+this.context.currentTime},i.prototype._relTime=function(e){return e-this.context.currentTime}}).call(this,e("_process"))},{_process:18}],13:[function(e,t,n){let o=e("load-sample-set"),i=e("select-element"),r=e("get-set-form-values"),s=e("adsr-gain-node"),a=e("./simple-tracker"),l=e("./get-set-controls"),c=new l,d=new AudioContext,h=e("./default-track");function u(e,t,n){o(e,t).then(function(e){f=e.buffers,sampleData=e.data,n||(n=_.getTrack()),n.settings.measureLength||(n.settings.measureLength=16),I=sampleData,m(sampleData,n.settings.measureLength),w.loadTrackerValues(n.beat),w.setupEvents()})}window.onload=function(){let e=new r,t=document.getElementById("trackerControls");e.set(t,h.settings),c.setTrackerControls(h.settings),u(d,h.settings.sampleSet,h),function e(){function t(e,t,n){verificarETocarBateria_2(e,t,n)&&(g(document.activeElement),mudarRitmo(e))}selectRitmo.addEventListener("change",function(e){var t=document.getElementsByClassName("selecionadoDrum");t.length>0&&t[0].classList.toggle("selecionadoDrum",!1),selecionarRitmo(document.activeElement.value)}),aro.addEventListener("mousedown",function(e){t("aro",!1)}),meiaLua.addEventListener("mousedown",function(e){t("meiaLua",!0,"stringsSolo")}),caixa.addEventListener("mousedown",function(e){t("",!1)}),brush.addEventListener("mousedown",function(e){t("brush",!1)}),ride.addEventListener("mousedown",function(e){t("ride",!0,"stringsSolo")}),chimbal.addEventListener("mousedown",function(e){t("chimbal",!0,"stringsSolo")}),playPauseBateria.addEventListener("mousedown",function(e){"none"!==tunerDiv.style.display&&(autoTunerCheck.checked=!1,pararOsAcordes()),g()}),prato.addEventListener("mousedown",function(e){if("none"==iconVolumeMute.style.display){var t;let n=f.prato1.get(),o,i,r;(t=n,(o=new s(d)).mode="linearRampToValueAtTime",i=c.getTrackerControls(),o.setOptions(i),r=o.getGainNode(0),t.connect(r),r).connect(d.destination),n.start()}}),bpm.addEventListener("change",function(e){var t=bpmRange.value;t=6e4/t,24==measureLength.value&&(t/=2),lightCompasso.style.animation="blink "+t+"ms infinite",c.options.bpm=bpmRange.value,w.running&&(w.stop(),w.runSchedule(c.options.bpm))}),bpmRange.addEventListener("input",function(e){bpm.value=bpmRange.value,bpm.dispatchEvent(eventoChange)}),measureLength.addEventListener("change",e=>{let t=parseInt(document.getElementById("measureLength").value);if(t<1)return;w.measureLength=t;let n=w.getTrackerValues();m(I,t),w.measureLength=t,w.loadTrackerValues(n),w.setupEvents()}),$(".base").on("change",function(){c.setTrackerControls()})}(),(_=new v).setupStorage()};var f,I,_,p={};function m(e,t){(p=e).title=p.filename,w.drawTracker(e.filename.length,t,p)}function b(e,t){var n,o;let i=p.filename[e],r=f[i].get(),a,l,h;(o=n=r,a=new s(d),a.mode="linearRampToValueAtTime",l=c.getTrackerControls(),a.setOptions(l),h=a.getGainNode(t),o.connect(h),h).connect(d.destination),fecharChimbal(i,_sourceChimbalAberto,t),n.start(t),guardarChimbalAberto(i,r)}var w=new a(d,b);function g(e=null){if(e){if(!w.running){let t;t=new v().getTrack(),w.measureLength=t.settings.measureLength,w.stop(),w.runSchedule(c.options.bpm)}}else _autoMudarRitmo&&w.running&&prato.dispatchEvent(eventoMousedown),w.stop(),w=new a(d,b)}function v(){this.setLocalStorage=function(e){var t={};t.Select="Select";for(var n=0,o=localStorage.length;n<o;++n){let r=localStorage.key(n);t[r]=r}var s=new i("load-storage","beat-list",t);e?s.update("beat-list",t):s.create()},this.getFilename=function(){let e=$("#filename").val();return e||(e="untitled"),e},this.getTrack=function(){let e=c.getTrackerControls(),t;return{beat:w.getTrackerValues(),settings:e}},this.alert=function(e){let t=document.getElementById("app-message");t.innerHTML=e,t.style.display="block",setTimeout(function(){t.style.display="none"},2e3)},this.setupStorage=function(){this.setLocalStorage()}}gerarRitmosNomes(ritmosNomes),$("#sampleSet").on("change",function(){u(d,this.value)})},{"./default-track":14,"./get-set-controls":15,"./simple-tracker":16,"adsr-gain-node":1,"file-saver":3,"get-set-form-values":5,"load-sample-set":7,"select-element":10}],14:[function(e,t,n){t.exports={beat:[{rowId:"0",colId:"0",enabled:!1},{rowId:"0",colId:"1",enabled:!1},{rowId:"0",colId:"2",enabled:!1},{rowId:"0",colId:"3",enabled:!1},{rowId:"0",colId:"4",enabled:!1},{rowId:"0",colId:"5",enabled:!1},{rowId:"0",colId:"6",enabled:!1},{rowId:"0",colId:"7",enabled:!1},{rowId:"1",colId:"0",enabled:!1},{rowId:"1",colId:"1",enabled:!1},{rowId:"1",colId:"2",enabled:!1},{rowId:"1",colId:"3",enabled:!1},{rowId:"1",colId:"4",enabled:!1},{rowId:"1",colId:"5",enabled:!1},{rowId:"1",colId:"6",enabled:!1},{rowId:"1",colId:"7",enabled:!1},{rowId:"2",colId:"0",enabled:!1},{rowId:"2",colId:"1",enabled:!1},{rowId:"2",colId:"2",enabled:!1},{rowId:"2",colId:"3",enabled:!1},{rowId:"2",colId:"4",enabled:!1},{rowId:"2",colId:"5",enabled:!1},{rowId:"2",colId:"6",enabled:!1},{rowId:"2",colId:"7",enabled:!1},{rowId:"3",colId:"0",enabled:!1},{rowId:"3",colId:"1",enabled:!1},{rowId:"3",colId:"2",enabled:!1},{rowId:"3",colId:"3",enabled:!1},{rowId:"3",colId:"4",enabled:!1},{rowId:"3",colId:"5",enabled:!1},{rowId:"3",colId:"6",enabled:!1},{rowId:"3",colId:"7",enabled:!1},{rowId:"4",colId:"0",enabled:!1},{rowId:"4",colId:"1",enabled:!1},{rowId:"4",colId:"2",enabled:!1},{rowId:"4",colId:"3",enabled:!1},{rowId:"4",colId:"4",enabled:!1},{rowId:"4",colId:"5",enabled:!1},{rowId:"4",colId:"6",enabled:!1},{rowId:"4",colId:"7",enabled:!1},{rowId:"5",colId:"0",enabled:!1},{rowId:"5",colId:"1",enabled:!1},{rowId:"5",colId:"2",enabled:!1},{rowId:"5",colId:"3",enabled:!1},{rowId:"5",colId:"4",enabled:!1},{rowId:"5",colId:"5",enabled:!1},{rowId:"5",colId:"6",enabled:!1},{rowId:"5",colId:"7",enabled:!1},{rowId:"6",colId:"0",enabled:!1},{rowId:"6",colId:"1",enabled:!1},{rowId:"6",colId:"2",enabled:!1},{rowId:"6",colId:"3",enabled:!1},{rowId:"6",colId:"4",enabled:!1},{rowId:"6",colId:"5",enabled:!1},{rowId:"6",colId:"6",enabled:!1},{rowId:"6",colId:"7",enabled:!1},{rowId:"7",colId:"0",enabled:!1},{rowId:"7",colId:"1",enabled:!1},{rowId:"7",colId:"2",enabled:!1},{rowId:"7",colId:"3",enabled:!1},{rowId:"7",colId:"4",enabled:!1},{rowId:"7",colId:"5",enabled:!1},{rowId:"7",colId:"6",enabled:!1},{rowId:"7",colId:"7",enabled:!1},{rowId:"8",colId:"0",enabled:!1},{rowId:"8",colId:"1",enabled:!1},{rowId:"8",colId:"2",enabled:!1},{rowId:"8",colId:"3",enabled:!1},{rowId:"8",colId:"4",enabled:!1},{rowId:"8",colId:"5",enabled:!1},{rowId:"8",colId:"6",enabled:!1},{rowId:"8",colId:"7",enabled:!1},{rowId:"9",colId:"0",enabled:!1},{rowId:"9",colId:"1",enabled:!1},{rowId:"9",colId:"2",enabled:!1},{rowId:"9",colId:"3",enabled:!1},{rowId:"9",colId:"4",enabled:!1},{rowId:"9",colId:"5",enabled:!1},{rowId:"9",colId:"6",enabled:!1},{rowId:"9",colId:"7",enabled:!1},{rowId:"10",colId:"0",enabled:!1},{rowId:"10",colId:"1",enabled:!1},{rowId:"10",colId:"2",enabled:!1},{rowId:"10",colId:"3",enabled:!1},{rowId:"10",colId:"4",enabled:!1},{rowId:"10",colId:"5",enabled:!1},{rowId:"10",colId:"6",enabled:!1},{rowId:"10",colId:"7",enabled:!1},{rowId:"11",colId:"0",enabled:!1},{rowId:"11",colId:"1",enabled:!1},{rowId:"11",colId:"2",enabled:!1},{rowId:"11",colId:"3",enabled:!1},{rowId:"11",colId:"4",enabled:!1},{rowId:"11",colId:"5",enabled:!1},{rowId:"11",colId:"6",enabled:!1},{rowId:"11",colId:"7",enabled:!1},{rowId:"12",colId:"0",enabled:!0},{rowId:"12",colId:"1",enabled:!0},{rowId:"12",colId:"2",enabled:!0},{rowId:"12",colId:"3",enabled:!0},{rowId:"12",colId:"4",enabled:!0},{rowId:"12",colId:"5",enabled:!0},{rowId:"12",colId:"6",enabled:!0},{rowId:"12",colId:"7",enabled:!0},{rowId:"13",colId:"0",enabled:!1},{rowId:"13",colId:"1",enabled:!1},{rowId:"13",colId:"2",enabled:!0},{rowId:"13",colId:"3",enabled:!1},{rowId:"13",colId:"4",enabled:!1},{rowId:"13",colId:"5",enabled:!1},{rowId:"13",colId:"6",enabled:!0},{rowId:"13",colId:"7",enabled:!1},{rowId:"14",colId:"0",enabled:!1},{rowId:"14",colId:"1",enabled:!1},{rowId:"14",colId:"2",enabled:!1},{rowId:"14",colId:"3",enabled:!1},{rowId:"14",colId:"4",enabled:!1},{rowId:"14",colId:"5",enabled:!1},{rowId:"14",colId:"6",enabled:!1},{rowId:"14",colId:"7",enabled:!1},{rowId:"15",colId:"0",enabled:!0},{rowId:"15",colId:"1",enabled:!1},{rowId:"15",colId:"2",enabled:!1},{rowId:"15",colId:"3",enabled:!1},{rowId:"15",colId:"4",enabled:!0},{rowId:"15",colId:"5",enabled:!1},{rowId:"15",colId:"6",enabled:!1},{rowId:"15",colId:"7",enabled:!1},],settings:{sampleSet:"./Sons/studio/samples.json",measureLength:16,bpm:92,detune:0,gainEnabled:"gain",attackAmp:0,sustainAmp:.4,decayAmp:.7,releaseAmp:1,attackTime:0,decayTime:0,sustainTime:2,releaseTime:2,adsrInterval:.1,delay:.01,filter:1e3}}},{}],15:[function(e,t,n){e("get-set-form-values");let o=JSON.parse('{ "": 92, "adsrInterval": 0.1, "attackTime": 0, "bpm": 92, "decayAmp": 0.7, "decayTime": 0, "delay": 0.01, "filter": 1000, "releaseAmp": 1, "releaseTime": 2, "sustainAmp": 0.4, "sustainTime": 2 }');t.exports=function e(){this.getTrackerControls=function(){return o},this.setTrackerControls=function(e){e||(e=this.getTrackerControls()),this.options=e}}},{"get-set-form-values":5}],16:[function(e,t,n){let o=e("waaclock"),i=e("./tracker-table"),r=e("has-class");t.exports=function e(t,n){this.measureLength=16,this.scheduleAudioBeat=n,this.scheduleForward=.1,this.current=0,this.eventMap={},this.clock=new o(t),this.clock.start(),this.running=!1,this.drawTracker=function(e,t,n){let o=new i;o.setRows(e,t,n);let r=o.getTable(),s=document.getElementById("tracker-parent");s.innerHTML="",s.insertAdjacentHTML("afterbegin",r)},this.next=function(){this.current++,this.current>=this.measureLength&&(this.current=0)},this.milliPerBeat=function(e){return e||(e=60),6e4/e},this.getTrackerRowValues=function(e){let t=[],n=`[data-col-id="${e}"]`;return document.querySelectorAll(n).forEach(e=>{let n=Object.assign({},e.dataset);n.enabled=e.classList.contains("tracker-enabled"),t.push(n)}),t},this.schedule=function(){let e=this.getTrackerRowValues(this.current),n=t.currentTime;e.forEach(e=>{this.scheduleBeat(e,n)})},this.scheduleBeat=function(e,t){let n=t+this.scheduleForward;this.scheduleMap[e.colId]=n,e.enabled&&(""!=_viradaRitmo&&(_trocarRitmo=!0,selecionarRitmo(_viradaRitmo,!0)),0==e.colId&&(selecionarRitmo(_ritmoSelecionado),_viradaRitmo=""),this.eventMap[this.getEventKey(e)]=this.clock.callbackAtTime(()=>{this.scheduleAudioBeat(e.rowId,n)},t))},this.scheduleMap={},this.scheduleAudioBeatNow=function(e){if(e.enabled){let n=this.eventMap[this.getEventKey(e)];n&&(n.clear(),delete this.eventMap[this.getEventKey(e)]);return}let o=this.scheduleMap[0]+e.colId*this.milliPerBeat(this.bpm)/1e3,i=t.currentTime;this.eventMap[this.getEventKey(e)]=this.clock.callbackAtTime(()=>{this.scheduleAudioBeat(e.rowId,o)},i)},this.interval,this.runSchedule=function(e){e*=4,this.running=!0,this.bpm=e;let t=this.milliPerBeat(e);setTimeout(()=>{this.schedule(),this.next()},0),this.interval=setInterval(()=>{this.schedule(),this.next()},t)},this.stop=function(){this.running=!1,clearInterval(this.interval)},this.getEventKey=function e(t){return t.rowId+t.colId},this.getTrackerValues=function(){let e=[];return document.querySelectorAll(".tracker-cell").forEach(function(t){let n=Object.assign({},t.dataset);n.enabled=r(t,"tracker-enabled"),e.push(n)}),e},this.loadTrackerValues=function(e){document.querySelectorAll(".tracker-enabled").forEach(function(e){e.classList.remove("tracker-enabled")}),e.forEach(function(e){if(!0===e.enabled){let t=`.tracker-cell[data-row-id="${e.rowId}"][data-col-id="${e.colId}"]`,n=document.querySelector(t);n&&n.classList.add("tracker-enabled")}})},this.setupEvents=function(){document.querySelectorAll(".tracker-cell").forEach(function(e){e.addEventListener("click",function(e){let t=Object.assign({},e.target.dataset);t.enabled=r(e.target,"tracker-enabled");let n=e.target.dataset.colId;t.colId>n&&this.scheduleAudioBeatNow(t),e.target.classList.toggle("tracker-enabled")})})}}},{"./tracker-table":17,"has-class":6,waaclock:11}],17:[function(e,t,n){t.exports=function e(){this.str="",this.getTable=function(){return'<table id="tracker-table">'+this.str+"</table>"},this.setHeader=function(e,t){this.str+='<tr class="tracker-row header">',this.str+=this.getCells("header",e,{header:!0}),this.str+="</tr>"},this.setRows=function(e,t,n){this.setHeader(t,n);for(let o=0;o<e;o++)this.str+=`<tr class="tracker-row" data-id="${o}">`,this.str+=this.getCells(o,t,n),this.str+="</tr>"},this.getFirstCell=function(e,n){t++;var o="";return o+=`<td class="tracker-first-cell" data-row-id="${e}">`,n.title&&(o+=n.title[e]),o+="</td>"};var t=0;this.getCells=function(e,n,o){var i="",r="";i+=this.getFirstCell(e,o);let s="tracker-cell";"header"==e&&(s="tracker-cell-header");for(let a=0;a<n;a++)i+=`<td class="${s}" data-row-id="${e}" data-col-id="${a}">${r="tracker-cell"==s?t:""}`,t++,o.header&&(i+=a+1),i+="</td>";return i}}},{}],18:[function(e,t,n){var o,i,r,s=t.exports={};function a(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function c(e){if(o===setTimeout)return setTimeout(e,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(n){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(e){o=a}try{i="function"==typeof clearTimeout?clearTimeout:l}catch(t){i=l}}();var d=[],h=!1,u=-1;function f(){h&&r&&(h=!1,r.length?d=r.concat(d):u=-1,d.length&&I())}function I(){if(!h){var e=c(f);h=!0;for(var t=d.length;t;){for(r=d,d=[];++u<t;)r&&r[u].run();u=-1,t=d.length}r=null,h=!1,function e(t){if(i===clearTimeout)return clearTimeout(t);if((i===l||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(n){try{return i.call(null,t)}catch(o){return i.call(this,t)}}}(e)}}function _(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new _(e,t)),1!==d.length||h||c(I)},_.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}},{}]},{},[13]);