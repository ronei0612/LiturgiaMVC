var accessToken;const clientId="982717214287-u57uddj8lrd7dq0n5i4fquuvci8umd60.apps.googleusercontent.com",redirectUri="https://"+window.location.host+"/orgao",scope="https://www.googleapis.com/auth/drive";function authorizeGoogle(){let e=`https://accounts.google.com/o/oauth2/auth?client_id=982717214287-u57uddj8lrd7dq0n5i4fquuvci8umd60.apps.googleusercontent.com&redirect_uri=${redirectUri}&response_type=token&scope=${encodeURIComponent("https://www.googleapis.com/auth/drive")}`;window.location.href=e}async function processToken(){let e=new URLSearchParams(window.location.hash.substr(1)),o=e.get("access_token");o?(localStorage.setItem("accessToken",o),localStorage.setItem("accessTokenExpiry",Date.now()+36e5)):console.error("Erro ao obter o token de acesso ou ID da pasta.")}function verificarSeObtendoTokenGoogle(){window.location.href.includes("#access_token")&&(processToken(),localStorage.getItem("accessToken")&&(document.location.hash=""))}async function criarArquivoNoGoogleDrive(e){try{let o=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=media",{method:"POST",headers:{Authorization:`Bearer ${accessToken}`,"Content-Type":"text/plain"},body:e}),t=await o.json(),a=t.id;localStorage.setItem("fileId",a),mostrarModal("compartilhado")}catch(r){console.error("Erro ao criar o arquivo:",r)}}function criarArquivodoStorage(){let e=verificarSeJaCompartilhado();if(""!==e){if(validarToken()){let o=criptografarTexto(e);localStorage.setItem("compartilhadoMD5",o),criarArquivoNoGoogleDrive(e)}}else mostrarModal("compartilhado")}async function validarToken(){accessToken=localStorage.getItem("accessToken");let e=localStorage.getItem("accessTokenExpiry");if(!accessToken)return authorizeGoogle(),!1;e&&!(Date.now()<parseInt(e))&&localStorage.removeItem("accessToken");try{let o=await fetch(`https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=${accessToken}`);if(!o.ok)throw Error("Erro ao validar o token:",o.status);await o.json()}catch(t){console.error(t),localStorage.removeItem("accessToken"),authorizeGoogle()}return!0}function carregarSalvosLocalStorage(){let e=localStorage.getItem("salvamentosv2"),o=e.split(",");o.shift();var t="";if(o&&o.length>0){let a={};o.forEach(e=>{let o=localStorage.getItem(e);a[e]=o});let r=JSON.stringify(a);t=r}return t}function criptografarTexto(e){return CryptoJS.MD5(e).toString()}function verificarSeJaCompartilhado(){let e=localStorage.getItem("fileId");"undefined"===e&&localStorage.removeItem("compartilhadoMD5");let o=localStorage.getItem("salvamentosv2"),t=criptografarTexto(o),a=localStorage.getItem("compartilhadoMD5");return a&&e&&t===a?"":o}function copiarTextoParaClipboard(e){var o=document.createElement("textarea");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),alert("Texto copiado!"),ocultarModal()}function compartilharMobile(e){navigator.share?navigator.share({title:"Compartilhar",text:e}).then(()=>console.log("Conte\xfado compartilhado com sucesso!")).catch(e=>console.error("Erro ao compartilhar:",e)):window.location.href="https://api.whatsapp.com/send?text="+e}function verificarSewww(){window.location.href.includes("localhost")||window.location.href.includes("https://www.")||(window.location.href="https://www."+window.location.host.replace("www.","")+window.location.pathname)}