var _grupoNotas,_grupoNotasStrings,timer,_acordeBaixo,_acordeNotas,_sourceChimbalAberto,_sourceBaixo,_configuracaoElemento,_configuracaoEvento,_acordeSelecionado="",_acordeAntesSelecionado="",_acompanhamentoSelecionado="",_acompanhamentoSolo=!1,_acompanhamentoFull=!1,_acompanhamentoMao=!1,_volume=.9,_instrumentoSelecionado="orgao",_stringsSelecionado=!1,_violaoSelecionado=!1,_stringsParado=!0,_autoMudarRitmo=!1,_orientacaoCelularPe=!0,_tomSelectedIndexCifra=0,_tomIndex="",_cifraId=0,_cifraParado=!0,_chimbalIsAberto=!1,_cravoSelecionado=!0,_viradaRitmo="",_trocarRitmo=!1,_configurandoTeclas=!1,_teclasConfiguracao={};const eventoClick=new Event("click"),eventoChange=new Event("change"),eventoMousedown=new Event("mousedown"),eventoMouseup=new Event("mouseup"),eventoTouchstart=new Event("touchstart"),eventoInput=new Event("input"),eventos={eventoClick:eventoClick,eventoChange:eventoChange,eventoMousedown:eventoMousedown,eventoMouseup:eventoMouseup,eventoTouchstart:eventoTouchstart,eventoInput:eventoInput},notasAcordes=Object.keys(notasAcordesJson),selectConfiguracao=document.getElementById("selectConfiguracao"),instrumentoSelect=document.getElementById("instrumentoSelect"),autoCheck=document.getElementById("autoCheck"),bpm=document.getElementById("bpm"),selectRitmo=document.getElementById("selectRitmo"),botaobotaoGravar=document.getElementById("botaoGravar"),play_pause=document.getElementById("play_pause"),bpmRange=document.getElementById("bpmRange"),chimbal=document.getElementById("chimbal"),brush=document.getElementById("brush"),meiaLua=document.getElementById("meiaLua"),prato=document.getElementById("prato"),aro=document.getElementById("aro"),caixa=document.getElementById("caixa"),cravo=document.getElementById("cravo"),pratoCravo=document.getElementById("pratoCravo"),brushCravo=document.getElementById("brushCravo"),tomSelect=document.getElementById("tomSelect"),volumeTexto=document.getElementById("volumeTexto"),textoCifras=document.getElementById("textoCifras"),textoAcordeMenor=document.getElementById("textoAcordeMenor"),textoCifrasFrame=document.getElementById("textoCifrasFrame"),container=document.getElementById("container"),voltar=document.getElementById("voltar"),botaoFonte=document.getElementById("botaoFonte"),selectFonte=document.getElementById("selectFonte"),botaoTamanhoIframe=document.getElementById("botaoTamanhoIframe"),selectTamanhoIframe=document.getElementById("selectTamanhoIframe"),tomMenorSwitchDiv=document.getElementById("tomMenorSwitchDiv"),orgaoCifrasBotoes=document.getElementById("orgaoCifrasBotoes"),tdVolume=document.getElementById("tdVolume"),volumeDiv=document.getElementById("volumeDiv"),textoVolume=document.getElementById("textoVolume"),volumeInput=document.getElementById("volumeInput"),cifraAvancar=document.getElementById("cifraAvancar"),cifraRepetir=document.getElementById("cifraRepetir"),cifraRetroceder=document.getElementById("cifraRetroceder"),exitfullscreen=document.getElementById("exitfullscreen"),fullscreenDiv=document.getElementById("fullscreenDiv"),botaoFullscreen=document.getElementById("botaoFullscreen"),trackerControls=document.getElementById("trackerControls"),divBateriaSwitch=document.getElementById("divBateriaSwitch"),bateria=document.getElementById("bateria"),linhaSelectTom=document.getElementById("linhaSelectTom"),navBar=document.getElementById("navBar"),oracoesEucaristicasDiv=document.getElementById("oracoesEucaristicasDiv"),acorde_10=document.getElementById("acorde_10"),acorde_7=document.getElementById("acorde_7"),acorde_9=document.getElementById("acorde_9"),muteDiv=document.getElementById("muteDiv"),botaoMute=document.getElementById("botaoMute"),iconVolumeMute=document.getElementById("iconVolumeMute"),iconVolume=document.getElementById("iconVolume"),modal01=document.getElementById("modal01"),linksCifraClubList=document.getElementById("linksCifraClubList"),botaoIniciar=document.getElementById("botaoIniciar"),escreverCifraTextArea=document.getElementById("escreverCifraTextArea"),selectInstrumento=document.getElementById("selectInstrumento"),salvarDiv=document.getElementById("salvarDiv"),selectOpcoes=document.getElementById("selectOpcoes"),modalGravar=document.getElementById("modalGravar"),musicaSearch=document.getElementById("musicaSearch"),titulo=document.getElementById("titulo"),bateriaBotoes=document.getElementById("bateriaBotoes"),selectSalvamento=document.getElementById("selectSalvamento"),lightCompasso=document.getElementById("lightCompasso"),modal_loading=document.getElementById("modal_loading"),prepararBateriaBotao=document.getElementById("prepararBateriaBotao"),pararBateriaBotao=document.getElementById("pararBateriaBotao"),play_pause_bateria=document.getElementById("play_pause_bateria"),textoRitmo=document.getElementById("textoRitmo"),listaMusicasCifra=document.getElementById("listaMusicasCifra"),orgaoBox=document.getElementById("orgaoBox"),notaTuner=document.getElementById("notaTuner"),tunerDiv=document.getElementById("tunerDiv"),autoTunerCheck=document.getElementById("autoTunerCheck"),liturgiaDiariaDiv=document.getElementById("liturgiaDiariaDiv"),violinoDesenho=document.getElementById("violinoDesenho"),violaoDesenho=document.getElementById("violaoDesenho"),switchDark=document.getElementById("switchDark"),baixo=document.getElementById("baixo"),mao=document.getElementById("mao"),full=document.getElementById("full"),stringsCheck=document.getElementById("stringsCheck"),violaoCheck=document.getElementById("stringsCheck"),measureLength=document.getElementById("measureLength"),musicaAcordesTextArea=document.getElementById("musicaAcordesTextArea"),acorde_0=document.getElementById("acorde_0"),acorde_3=document.getElementById("acorde_3"),acorde_4=document.getElementById("acorde_4"),acorde_5=document.getElementById("acorde_5"),acorde_1=document.getElementById("acorde_1"),acorde_2=document.getElementById("acorde_2"),aumentarTomMais=document.getElementById("aumentarTomMais"),diminuirTomMenos=document.getElementById("diminuirTomMenos"),tomMenorSwitch=document.getElementById("tomMenorSwitch"),tituloConfiguracaoTeclas=document.getElementById("tituloConfiguracaoTeclas"),textoConfiguracao=document.getElementById("textoConfiguracao"),tecladoTeclasDiv=document.getElementById("tecladoTeclasDiv"),inputTecla=document.getElementById("inputTecla"),elementos={instrumentoSelect:instrumentoSelect,autoCheck:autoCheck,bpm:bpm,selectRitmo:selectRitmo,botaobotaoGravar:botaobotaoGravar,play_pause:play_pause,bpmRange:bpmRange,chimbal:chimbal,brush:brush,meiaLua:meiaLua,prato:prato,aro:aro,caixa:caixa,cravo:cravo,brushCravo:brushCravo,pratoCravo:pratoCravo,tomSelect:tomSelect,volumeTexto:volumeTexto,textoCifras:textoCifras,textoAcordeMenor:textoAcordeMenor,textoCifrasFrame:textoCifrasFrame,container:container,voltar:voltar,botaoFonte:botaoFonte,selectFonte:selectFonte,botaoTamanhoIframe:botaoTamanhoIframe,selectTamanhoIframe:selectTamanhoIframe,tomMenorSwitchDiv:tomMenorSwitchDiv,orgaoCifrasBotoes:orgaoCifrasBotoes,tdVolume:tdVolume,volumeDiv:volumeDiv,textoVolume:textoVolume,volumeInput:volumeInput,cifraAvancar:cifraAvancar,cifraRepetir:cifraRepetir,cifraRetroceder:cifraRetroceder,exitfullscreen:exitfullscreen,fullscreenDiv:fullscreenDiv,botaoFullscreen:botaoFullscreen,trackerControls:trackerControls,divBateriaSwitch:divBateriaSwitch,bateria:bateria,linhaSelectTom:linhaSelectTom,navBar:navBar,oracoesEucaristicasDiv:oracoesEucaristicasDiv,acorde_10:acorde_10,acorde_7:acorde_7,acorde_9:acorde_9,muteDiv:muteDiv,botaoMute:botaoMute,iconVolumeMute:iconVolumeMute,iconVolume:iconVolume,modal01:modal01,linksCifraClubList:linksCifraClubList,botaoIniciar:botaoIniciar,escreverCifraTextArea:escreverCifraTextArea,selectInstrumento:selectInstrumento,salvarDiv:salvarDiv,selectOpcoes:selectOpcoes,modalGravar:modalGravar,musicaSearch:musicaSearch,titulo:titulo,bateriaBotoes:bateriaBotoes,selectSalvamento:selectSalvamento,lightCompasso:lightCompasso,modal_loading:modal_loading,prepararBateriaBotao:prepararBateriaBotao,pararBateriaBotao:pararBateriaBotao,play_pause_bateria:play_pause_bateria,textoRitmo:textoRitmo,listaMusicasCifra:listaMusicasCifra,orgaoBox:orgaoBox,notaTuner:notaTuner,tunerDiv:tunerDiv,autoTunerCheck:autoTunerCheck,liturgiaDiariaDiv:liturgiaDiariaDiv,violinoDesenho:violinoDesenho,violaoDesenho:violaoDesenho,switchDark:switchDark,baixo:baixo,mao:mao,full:full,stringsCheck:stringsCheck,violaoCheck:stringsCheck,measureLength:measureLength,musicaAcordesTextArea:musicaAcordesTextArea,acorde_0:acorde_0,acorde_3:acorde_3,acorde_4:acorde_4,acorde_5:acorde_5,acorde_1:acorde_1,acorde_2:acorde_2,aumentarTomMais:aumentarTomMais,diminuirTomMenos:diminuirTomMenos,tomMenorSwitch:tomMenorSwitch,tituloConfiguracaoTeclas:tituloConfiguracaoTeclas,textoConfiguracao:textoConfiguracao,tecladoTeclasDiv:tecladoTeclasDiv,inputTecla:inputTecla};function capturarTeclaPressionada(e){if(_configurandoTeclas)armazenarTeclaConfiguracaoTeclas(e);else if(_teclasConfiguracao[e]){let a=elementos[_teclasConfiguracao[e][0]],o=eventos[_teclasConfiguracao[e][1]];_teclasConfiguracao[e][0].includes("Check")&&(a.checked=!a.checked),a.dispatchEvent(o)}}function limparConfiguracaoTeclas(){confirm("Apagar as Configura\xe7\xf5es de Teclas?")&&localStorage.removeItem("teclasConfiguracao")}function mostrarSalvarConfiguracaoTeclas(){_configurandoTeclas=!0,modal01.style.display="none",tituloConfiguracaoTeclas.style.display="",titulo.style.display="none",botaoGravar.style.display="none",play_pause.style.display="",prepararBateriaBotao.style.display="none",pararBateriaBotao.style.display=""}function ocultarSalvarConfiguracaoTeclas(){_configurandoTeclas=!1,tituloConfiguracaoTeclas.style.display="none",titulo.style.display="",tecladoTeclasDiv.style.display="none",botaoGravar.style.display="",play_pause.style.display="none",prepararBateriaBotao.style.display="",pararBateriaBotao.style.display="none"}function capturarTeclaConfiguracaoTeclas(e){_configuracaoEvento=e.getAttribute("dataEventoTecla"),selectConfiguracao.style.display="none",modal01.style.display="block",_configuracaoElemento=e.id,selectOpcoes.style.display="none",tecladoTeclasDiv.style.display="",inputTecla.focus()}function verificarSeTemValor(e,a){for(let o in e)e[o][0].includes(a)&&delete e[o]}function armazenarTeclaConfiguracaoTeclas(e){verificarSeTemValor(_teclasConfiguracao,_configuracaoElemento);let a=[_configuracaoElemento,_configuracaoEvento];_teclasConfiguracao[e]=a,ocultarModal()}function salvarConfiguracaoTeclas(){_teclasConfiguracao?(localStorage.setItem("teclasConfiguracao",JSON.stringify(_teclasConfiguracao)),ocultarSalvarConfiguracaoTeclas()):alert("Nada foi configurado. Saindo..."),carregarConfiguracaoTeclas()}function carregarConfiguracaoTeclas(){let e=localStorage.getItem("teclasConfiguracao");e&&(_teclasConfiguracao=JSON.parse(e))}function handleTouchStart(e,a,o=!1){e.preventDefault(),a.dispatchEvent(eventoMousedown),o&&a.dispatchEvent(eventoClick)}function isMobileDevice(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function darkModeLocalStorage(){var e=localStorage.getItem("darkMode");e&&"true"===e&&(switchDark.checked=!0,switchDark.dispatchEvent(eventoClick))}function manterTelaLigada_v2(){let e=null;try{e=navigator.wakeLock.request("screen")}catch{}}function verificarOrientacaoCelular(){isMobileDevice()&&(window.matchMedia("(orientation: portrait)").matches&&(_orientacaoCelularPe=!0),window.matchMedia("(orientation: landscape)").matches&&(_orientacaoCelularPe=!1))}function orientacaoCelularAlterado(e){0===e.target.screen.orientation.angle?(_orientacaoCelularPe=!0,"none"!==textoCifrasFrame.style.display&&mostrarNavBar()):(_orientacaoCelularPe=!1,"none"!==textoCifrasFrame.style.display&&ocultarNavBar()),"none"!==exitfullscreen.style.display&&mudarParaFullscreen()}function ocultarBotoesRitmo(e=!0){var a=document.getElementsByClassName("trBateriaBotoes");let o=document.getElementsByClassName("trCravoBotoes");if(e){for(let t=0;t<a.length;t++)a[t].style.display="none";if(_cravoSelecionado)for(let n=0;n<o.length;n++)o[n].style.display=""}else{for(let r=0;r<a.length;r++)a[r].style.display="";for(let i=0;i<o.length;i++)o[i].style.display="none"}}function pressionarBotaoCravo(){var e=document.getElementsByClassName("selecionadoDrum");e.length>0&&e[0].dispatchEvent(eventoClick)}function deixarAcompanhamentoSelecionado(e){escolherAcompanhamento(e,document.getElementById(e))}function ocultarBotaoRec(e=!0){e?(botaoGravar.style.display="none",play_pause.style.display="block"):(botaoGravar.style.display="block",play_pause.style.display="none")}function escolherAcorde(e,a){if(_configurandoTeclas){capturarTeclaConfiguracaoTeclas(a);return}_cifraId>0&&(_cifraParado=!0,_cifraId--),_acordeSelecionado=_acordeAntesSelecionado===e?"":e,a&&levantarBotoesAcordes(),""===_acordeSelecionado?(_acordeAntesSelecionado=_acordeSelecionado,pararOsAcordes(),a&&ocultarBotaoRec(!1)):(tocarAcorde(e,a),a&&ocultarBotaoRec())}function autoMudarRitmo(e=null){if("none"!==pararBateriaBotao.style.display&&_autoMudarRitmo){var a=e||document.querySelector(".selecionado");_stringsSelecionado?("baixo"===a.id||"mao"===a.id)&&"epiano"===_instrumentoSelecionado?caixa.dispatchEvent(eventoClick):("baixo"===a.id||"mao"===a.id)&&"orgao"===_instrumentoSelecionado?brush.dispatchEvent(eventoClick):"full"===a.id&&"epiano"===_instrumentoSelecionado?meiaLua.dispatchEvent(eventoClick):"full"===a.id&&"orgao"===_instrumentoSelecionado&&aro.dispatchEvent(eventoClick):("baixo"===a.id||"mao"===a.id)&&"epiano"===_instrumentoSelecionado?aro.dispatchEvent(eventoClick):("baixo"===a.id||"mao"===a.id)&&"orgao"===_instrumentoSelecionado?brush.dispatchEvent(eventoClick):"full"===a.id&&"epiano"===_instrumentoSelecionado?caixa.dispatchEvent(eventoClick):"full"===a.id&&"orgao"===_instrumentoSelecionado&&aro.dispatchEvent(eventoClick)}}function escolherAcompanhamento(e,a){if(_configurandoTeclas){capturarTeclaConfiguracaoTeclas(a);return}_acompanhamentoSelecionado=e,pressionarBotaoAcompanhamento(a),autoMudarRitmo(a)}function tocarAcorde(e,a){a?(""!==a.value?verificarAcompanhamentoEtocar(a.value):verificarAcompanhamentoEtocar(e),a.classList.toggle("pressionado",!0)):verificarAcompanhamentoEtocar(e)}function setTom(e="C"){tomSelect.value=e}function refinarAcorde(e){if((e=e.includes("_")?e.split("_")[1]:e).length>1&&"b"===e[1]){var a=e.slice(0,2);e=e.replace(a,acidentesCorrespondentesJson[a])}return _acordeSelecionado=e,e}function getNotaBaixo(e){let a;return e.includes("/")?(a=refinarAcorde(e.split("/")[1]),e=refinarAcorde(e.split("/")[0]),a=notasAcordesJson[a][0]):(e=refinarAcorde(e),a=notasAcordesJson[e][0]),[e,a]}function montarAcorde(e,a,o="orgao"){"stringsSolo"===o&&_stringsSelecionado&&(o="strings");let t=getNotaBaixo(e=e.replace("E#","F"));if(e=t[0],_acordeBaixo=t[1],_acordeNotas=notasAcordesJson[e],a){if("stringsSolo"===o)a.addSound(acordes["strings_"+_acordeNotas[0]]),a.addSound(acordes["strings_"+_acordeNotas[0]+"_baixo"]),a.addSound(acordes["strings_"+_acordeNotas[0]+"_grave"]);else for(var n=0,r=_acordeNotas.length;n<r;n++)("full"===_acompanhamentoSelecionado||"baixo"===_acompanhamentoSelecionado)&&("epiano"!==o&&0===n&&a.addSound(acordes[o+"_"+_acordeBaixo+"_grave"]),"strings"!==o?a.addSound(acordes[o+"_"+_acordeNotas[n]+"_baixo"]):1===n&&a.addSound(acordes[o+"_"+_acordeNotas[n]+"_baixo"])),("full"===_acompanhamentoSelecionado||"mao"===_acompanhamentoSelecionado)&&("stringsSolo"===o?a.addSound(acordes["strings_"+_acordeNotas[0]]):"strings"!==o?a.addSound(acordes[o+"_"+_acordeNotas[n]]):0!==n&&1!==n&&a.addSound(acordes[o+"_"+_acordeNotas[n]]))}return"orgao"===o&&(a.attack=.1),a}function verificarGrupoNotasInstanciado(e,a=null){return e||((e=new Pizzicato.Group).volume=_volume),e}function verificarAcompanhamentoEtocar(e,a=0){_acordeAntesSelecionado===e?(pararOsAcordes(!0,_stringsSelecionado),a=50):pararOsAcordes(!0),_acordeAntesSelecionado=e,"strings"===_instrumentoSelecionado?(_grupoNotasStrings=montarAcorde(e,_grupoNotasStrings=verificarGrupoNotasInstanciado(_grupoNotasStrings),"stringsSolo")).play():((_grupoNotas=montarAcorde(e,_grupoNotas=verificarGrupoNotasInstanciado(_grupoNotas),_instrumentoSelecionado)).play(),_stringsSelecionado&&(_stringsParado||_grupoNotas.sounds.length<10)&&(_stringsParado=!1,(_grupoNotasStrings=montarAcorde(e,_grupoNotasStrings=verificarGrupoNotasInstanciado(_grupoNotasStrings),"strings")).play()))}function pararOsAcordes(e=!1,a=!1){if(_grupoNotas&&(_grupoNotas.stop(),e)){var o=_grupoNotas.sounds.length;for(let t=o-1;t>-1;t--)_grupoNotas.removeSound(_grupoNotas.sounds[t])}if(!1===a&&_grupoNotasStrings&&(_stringsParado=!0,_grupoNotasStrings.stop(),e)){var o=_grupoNotasStrings.sounds.length;for(let n=o-1;n>-1;n--)_grupoNotasStrings.removeSound(_grupoNotasStrings.sounds[n])}}function levantarBotoesAcordes(){var e=document.getElementsByClassName("pressionado");e.length>0&&e[0].classList.toggle("pressionado",!1)}function levantarBotoesAcompanhamento(){var e=document.getElementsByClassName("selecionado");for(let a=0;a<e.length;a++)e[a].classList.toggle("selecionado",!1)}function pressionarBotaoAcompanhamento(e){!1===botaoAcompPressionado(e)&&(""!==_acordeAntesSelecionado&&"epiano"!==_instrumentoSelecionado&&verificarAcompanhamentoEtocar(_acordeAntesSelecionado),levantarBotoesAcompanhamento(),pressionarBotaoAcomp(e))}function botaoAcompPressionado(e){return!!e.classList.contains("selecionado")}function pressionarBotaoAcomp(e){e.classList.toggle("selecionado",!0)}function alterarVolume(e,a){_volume=parseFloat(e),_grupoNotas&&(_grupoNotas.volume=_volume),_grupoNotasStrings&&(_grupoNotasStrings.volume=_volume),e===a?volumeTexto.innerHTML=10*e:volumeTexto.innerHTML=10*e+"*"}function mudarTomCifra(e,a){_tomSelectedIndexCifra=tomSelect.selectedIndex;var o=textoCifras.contentDocument.body.innerHTML;$.ajax({type:"post",url:"Orgao/AlterarTom",data:{texto:o,aumentar:e,quant:a},success:function(e){e.success?(textoCifras.contentDocument.body.innerHTML=e.message,addEventCifras(textoCifras)):alert(e.message)}})}function mudarTom(e){var a=acordesCampoHarmonicoJson[e];Array.from(document.getElementsByClassName("acorde")).forEach(e=>{var o=e.id.split("_")[1];e.value=a[o]});var o=document.getElementsByClassName("pressionado");if(o.length>0){var t=o[0];escolherAcorde("orgao_"+t.value,t)}mudarTomMenor(tomSelect.selectedIndex),localStorage.setItem("tomSelecionadoIndex",tomSelect.selectedIndex)}function mudarTomMenor(e){textoAcordeMenor.innerText=acordesTons[e+12]}function aumentarTom(e,a,o){if(_configurandoTeclas){capturarTeclaConfiguracaoTeclas(document.activeElement);return}var t=document.getElementById(o),n=t.selectedIndex;if(t.value.includes("m"))var r=tonsMenores;else var r=tonsMaiores;e?n+a===t.length?t.value=r[0]:n+a>t.length?t.value=r[-1+a]:t.value=r[n+a]:n-a<0?0===n?t.value=r[t.length-a]:t.value=r[t.length-1]:t.value=r[n-a],"block"===textoCifrasFrame.style.display?mudarTomCifra(e,a):mudarTom(t.value)}function adicionarTonsSelect(e,a,o){var t=document.getElementById(e);t.innerHTML="";var n=tonsMaiores;!1===o&&(n=tonsMenores);for(var r=0;r<n.length;r++){let i=document.createElement("option");i.value=n[r],i.textContent+=n[r],t.appendChild(i)}t.selectedIndex=a}function mostrarTextoCifrasCarregado(e=null,a=null){e&&(e.includes("m")?adicionarTonsSelect("tomSelect",tonsMenores.indexOf(e),!1):adicionarTonsSelect("tomSelect",tonsMaiores.indexOf(e),!0),_tomSelectedIndexCifra=tomSelect.selectedIndex),a&&(textoCifras.contentDocument.body.innerHTML=a),document.body.classList.contains("bg-dark")?textoCifras.contentWindow.document.querySelector("pre").style.color="#fff":textoCifras.contentWindow.document.querySelector("pre").style.color="#000","none"===textoCifrasFrame.style.display&&mudarParaTelaFrame(),addEventCifras(textoCifras),mudarTamanhoFrameCifras(_orientacaoCelularPe)}function selecionarCifraId(){var e=textoCifras.contentDocument.getElementsByClassName("cifraSelecionada");e.length>0&&(_cifraId=e[0].id.split("cifra")[1]-1)}function mudarParaTelaFrame(){textoCifrasFrame.style.display="block";for(var e=document.getElementsByClassName("orgaoBotoes"),a=0;a<e.length;a++)e[a].style.display="none";container.classList.remove("d-sm-flex"),volumeDiv.style.display="none",voltar.style.display="block",botaoFonte.style.display="block",selectFonte.style.display="none",botaoTamanhoIframe.style.display="block",selectTamanhoIframe.style.display="none",tomMenorSwitchDiv.style.display="none",orgaoCifrasBotoes.style.display="",tdVolume.setAttribute("rowspan",""),tdVolume.setAttribute("colspan",5),volumeDiv.style.display="block",textoVolume.style.display="none",volumeInput.setAttribute("orient",""),$("#tdVolume").appendTo("#orgaoTable"),$("#orgaoTable").prependTo("#bateriaBox"),!1===_orientacaoCelularPe&&ocultarNavBar()}function addEventCifras(e){for(var a=e.contentDocument.getElementsByTagName("b"),o=0;o<a.length;o++)a[o].addEventListener("click",function(e){var a=textoCifras.contentDocument.getElementsByClassName("cifraSelecionada");a.length>0&&a[0].classList.remove("cifraSelecionada"),e.target.classList.add("cifraSelecionada"),e.target.scrollIntoView(),parent.tocarCifraManualmente(e.target)})}function tocarCifraManualmente(e){_cifraId=e.id.split("cifra")[1]-1,!1===_cifraParado&&avancarCifra("avancar",cifraAvancar)}function avancarCifra(e,a){if(_configurandoTeclas){capturarTeclaConfiguracaoTeclas(a);return}if(""===e)escolherAcorde("",a),botaoGravar.style.display="block",play_pause.style.display="none";else if("repetir"===e)!1===_cifraParado&&verificarAcompanhamentoEtocar(_acordeAntesSelecionado,50);else{var o=textoCifras.contentDocument,t=o.getElementsByTagName("b"),n=o.getElementsByClassName("cifraSelecionada");if("avancar"===e&&_cifraId<t.length){n.length>0&&n[0].classList.remove("cifraSelecionada"),_cifraParado=!1;var r=t[_cifraId];tocarAcorde(r.innerHTML.trim(),null),cifraRetroceder.classList.contains("pressionado")&&cifraRetroceder.classList.remove("pressionado"),a.classList.toggle("pressionado",!0),r.classList.add("cifraSelecionada"),r.scrollIntoView(),_cifraId++}if("retroceder"===e&&_cifraId-1>0){n.length>0&&n[0].classList.remove("cifraSelecionada"),!1===_cifraParado&&_cifraId--;var r=t[_cifraId-1];tocarAcorde(r.innerHTML.trim(),null),cifraAvancar.classList.contains("pressionado")&&cifraAvancar.classList.remove("pressionado"),a.classList.toggle("pressionado",!0),r.classList.add("cifraSelecionada"),r.scrollIntoView()}botaoGravar.style.display="none",play_pause.style.display="block"}}function mudarTempoCompasso(){var e=bpm.value;e=6e4/e,"6/8"===selectRitmo.value&&(e/=2),lightCompasso.style.animation="blink "+e+"ms infinite",bpmRange.value=bpm.value}function mudarTamanhoFrameCifras(e){textoCifras.contentWindow.document.querySelector("pre").style.fontSize=selectFonte.value+"px"}function rolagemTelaOracaoEucaristica(e=!0){if("none"!==oracoesEucaristicasDiv.style.display){var a="scrollOracoesEuc";if(e)localStorage.setItem(a,modal01.scrollTop);else{var o=localStorage.getItem(a);o&&modal01.scrollTo(0,parseInt(o))}}}function selecionarStrings(e){if(_configurandoTeclas){stringsCheck.checked=!1,capturarTeclaConfiguracaoTeclas(stringsCheck);return}e?(_stringsSelecionado=!0,_stringsParado&&""!==_acordeAntesSelecionado&&(_stringsParado=!1,(_grupoNotasStrings=montarAcorde(_acordeAntesSelecionado,_grupoNotasStrings=verificarGrupoNotasInstanciado(_grupoNotasStrings),"strings")).play())):_stringsSelecionado=!1,autoMudarRitmo()}function selecionarViolao(e){if(_configurandoTeclas){violaoCheck.checked=!1,capturarTeclaConfiguracaoTeclas(violaoCheck);return}_violaoSelecionado=!!e}function voltarParaOrgao(){voltar.style.display="none",botaoFonte.style.display="none",selectFonte.style.display="none",botaoTamanhoIframe.style.display="none",selectTamanhoIframe.style.display="none",orgaoCifrasBotoes.style.display="none",textoCifrasFrame.style.display="none",tomMenorSwitchDiv.style.display="";for(var e=document.getElementsByClassName("orgaoBotoes"),a=0;a<e.length;a++)e[a].style.display="";container.classList.add("d-sm-flex"),tdVolume.setAttribute("rowspan",5),tdVolume.setAttribute("colspan",""),volumeDiv.style.display="flex",textoVolume.style.display="",volumeInput.setAttribute("orient","vertical"),$("#tdVolume").appendTo("#orgaoControle"),$("#orgaoTable").appendTo("#orgaoBox"),mostrarNavBar(),ultimoTomSelecionadoStorage()}function mudarParaFullscreen(){exitfullscreen.style.display="flex",botaoFullscreen.style.display="none",divBateriaSwitch.style.display="none",bateria.style.display="none",switchDarkDiv.style.display="none",muteDiv.style.display="","none"!==textoCifrasFrame.style.display&&!1===_orientacaoCelularPe&&isMobileDevice()&&ocultarNavBar();var e=document.body,a=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;a&&a.call(e)}function sairDeFullscreen(){"none"!==exitfullscreen.style.display&&("none"===textoCifrasFrame.style.display&&mostrarNavBar(),exitfullscreen.style.display="none",botaoFullscreen.style.display="flex",switchDarkDiv.style.display="",muteDiv.style.display="none",document.exitFullscreen(),linhaSelectTom.classList.add("d-flex"),mutarVolume(!1))}function mostrarNavBar(){$("#fullscreenDiv").prependTo("#linhaNavBar"),$("#botaoOpcoes").prependTo("#linhaNavBar"),$("#titulo").appendTo("#linhaNavBar"),$("#botaoSalvar").appendTo("#linhaNavBar"),$("#switchDarkDiv").appendTo("#linhaNavBar"),$("#muteDiv").appendTo("#linhaNavBar"),navBar.style.display="block",linhaSelectTom.style.width=""}function ocultarNavBar(){$("#titulo").prependTo("#linhaSelectTom"),$("#fullscreenDiv").prependTo("#linhaSelectTom"),$("#botaoOpcoes").prependTo("#linhaSelectTom"),$("#botaoSalvar").appendTo("#linhaSelectTom"),$("#muteDiv").appendTo("#linhaSelectTom"),navBar.style.display="none",linhaSelectTom.style.width="100%"}function ultimoTomSelecionadoStorage(){var e=localStorage.getItem("tomSelecionadoIndex");e&&(tomSelect.selectedIndex=e,tomSelect.dispatchEvent(new Event("change")))}function selecionarTomMenor(e){e?(textoAcordeMenor.style.color="black",tomSelect.style.color="grey",acorde_10.style.display="block",acorde_7.style.display="block",acorde_9.style.display="block"):(textoAcordeMenor.style.color="grey",tomSelect.style.color="black",acorde_10.style.display="none",acorde_7.style.display="none",acorde_9.style.display="none")}function aumentarTom_click(e){timer&&clearTimeout(timer),timer=setTimeout(function(){aumentarTom(e,1,"tomSelect")},240)}function aumentarTom_clickDuplo(e){clearTimeout(timer),aumentarTom(e,2,"tomSelect")}function showselectFonte(e){e?(botaoFonte.style.display="none",selectFonte.style.display=""):"none"!==textoCifrasFrame.style.display&&(textoCifras.contentWindow.document.querySelector("pre").style.fontSize=selectFonte.value+"px")}function showselectIframe(e){e?(botaoTamanhoIframe.style.display="none",selectTamanhoIframe.style.display=""):"none"!==textoCifrasFrame.style.display&&(textoCifrasFrame.style.height=selectTamanhoIframe.value+"px",textoCifras.style.height=selectTamanhoIframe.value+"px")}function prepararMudarTomCifra(e){setTimeout(function(){if("none"==textoCifrasFrame.style.display)mudarTom(e);else{if(e.includes("m"))var a=tonsMenores.indexOf(e);else var a=tonsMaiores.indexOf(e);(a-=_tomIndex)<0?mudarTomCifra(!1,Math.abs(a)):mudarTomCifra(!0,a)}},0)}function pegarTomCifra(e){_tomIndex=e.includes("m")?tonsMenores.indexOf(e):tonsMaiores.indexOf(e)}deixarAcompanhamentoSelecionado("full"),verificarOrientacaoCelular(),manterTelaLigada_v2(),carregarConfiguracaoTeclas(),document.addEventListener("visibilitychange",function(){isMobileDevice()&&"visible"===document.visibilityState&&manterTelaLigada_v2()}),document.addEventListener("keydown",function(e){capturarTeclaPressionada(e.key)}),window.onerror=function(e,a,o,t,n){isMobileDevice()&&alert("Erro!\n"+e)},selectRitmo.addEventListener("change",function(e){_grupoNotas=verificarGrupoNotasInstanciado(_grupoNotas)}),bpm.addEventListener("change",function(e){_grupoNotas=verificarGrupoNotasInstanciado(_grupoNotas)}),autoCheck.addEventListener("change",function(e){_cravoSelecionado?_autoMudarRitmo=!1:(_autoMudarRitmo=this.checked)?ocultarBotoesRitmo():ocultarBotoesRitmo(!1)}),instrumentoSelect.addEventListener("change",e=>{var a;_instrumentoSelecionado=instrumentoSelect.value.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}),window.addEventListener("orientationchange",e=>{orientacaoCelularAlterado(e)});