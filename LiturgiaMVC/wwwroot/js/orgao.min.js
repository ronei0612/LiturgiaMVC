const notasFrequencias={a:110,a_:116.54,b:123.47,c:130.81,c_:138.59,d:146.83,d_:155.56,e:164.81,f:174.61,f_:185,g:196,g_:207.65,a1:220,a_1:233.08,b1:246.94,c1:261.63,c_1:277.18,d1:293.67,d_1:311.13,e1:329.63,f1:349.23,f_1:369.99,g1:392,g_1:415.3},primeiraGuitar=new Pizzicato.Sound({source:"wave",options:{type:"sawtooth",frequency:notasFrequencias.c1,release:3,attack:.4,volume:.01}}),quintaGuitar=new Pizzicato.Sound({source:"wave",options:{type:"sawtooth",frequency:notasFrequencias.g1,release:3,attack:.4,volume:.01}}),distortion=new Pizzicato.Effects.Distortion({gain:.5,mix:.5});var _grupoNotas,_grupoNotasStrings,timer,_acordeBaixo,_acordeNotas,_notasSolo,_sourceChimbalAberto,_sourceBaixo,_configuracaoElemento,_configuracaoEvento,flanger=new Pizzicato.Effects.Flanger({time:.45,speed:.2,depth:.1,feedback:.1,mix:.5}),reverb=new Pizzicato.Effects.Reverb({time:2,decay:2,reverse:!1,mix:.5});primeiraGuitar.addEffect(distortion),primeiraGuitar.addEffect(flanger),primeiraGuitar.addEffect(reverb),quintaGuitar.addEffect(distortion),quintaGuitar.addEffect(flanger),quintaGuitar.addEffect(reverb);var _acordeSelecionado="",_acordeAntesSelecionado="",_acompanhamentoSelecionado="",_acompanhamentoSolo=!1,_acompanhamentoFull=!1,_acompanhamentoMao=!1,_volume=.9,_instrumentoSelecionado="orgao",_stringsSelecionado=!1,_baixoSelecionado=!1,_violaoSelecionado=!1,_epianoSelecionado=!1,_guitarraSelecionado=!1,_guitarraParado=!0,_stringsParado=!0,_autoMudarRitmo=!1,_orientacaoCelularPe=!0,_tomSelectedIndexCifra=0,_tomIndex="",_cifraId=0,_cifraParado=!0,_chimbalIsAberto=!1,_cravoSelecionado=!0,_viradaRitmo="",_trocarRitmo=!1,_configurandoTeclas=!1,_teclasConfiguracao={};const eventoClick=new Event("click"),eventoChange=new Event("change"),eventoMousedown=new Event("mousedown"),eventoMouseup=new Event("mouseup"),eventoTouchstart=new Event("touchstart"),eventoInput=new Event("input"),eventos={eventoClick:eventoClick,eventoChange:eventoChange,eventoMousedown:eventoMousedown,eventoMouseup:eventoMouseup,eventoTouchstart:eventoTouchstart,eventoInput:eventoInput},notasAcordes=Object.keys(notasAcordesJson),selectConfiguracao=document.getElementById("selectConfiguracao"),tableRitmo=document.getElementById("tableRitmo"),instrumentoSelect=document.getElementById("instrumentoSelect"),autoCheck=document.getElementById("autoCheck"),autoCheckDiv=document.getElementById("autoCheckDiv"),acompCheck=document.getElementById("acompCheck"),acompCheckDiv=document.getElementById("acompCheckDiv"),bpm=document.getElementById("bpm"),selectRitmo=document.getElementById("selectRitmo"),botaobotaoGravar=document.getElementById("botaoGravar"),play_pause=document.getElementById("play_pause"),bpmRange=document.getElementById("bpmRange"),chimbal=document.getElementById("chimbal"),brush=document.getElementById("brush"),meiaLua=document.getElementById("meiaLua"),prato=document.getElementById("prato"),aro=document.getElementById("aro"),caixa=document.getElementById("caixa"),cravo=document.getElementById("cravo"),pratoCravo=document.getElementById("pratoCravo"),brushCravo=document.getElementById("brushCravo"),stringsBotao=document.getElementById("stringsBotao"),violaoBotao=document.getElementById("violaoBotao"),pianoBotao=document.getElementById("pianoBotao"),baixoBotao=document.getElementById("baixoBotao"),tomSelect=document.getElementById("tomSelect"),volumeTexto=document.getElementById("volumeTexto"),textoCifras=document.getElementById("textoCifras"),textoAcordeMenor=document.getElementById("textoAcordeMenor"),textoCifrasFrame=document.getElementById("textoCifrasFrame"),container=document.getElementById("container"),voltar=document.getElementById("voltar"),botaoFonte=document.getElementById("botaoFonte"),selectFonte=document.getElementById("selectFonte"),botaoTamanhoIframe=document.getElementById("botaoTamanhoIframe"),selectTamanhoIframe=document.getElementById("selectTamanhoIframe"),tomMenorSwitchDiv=document.getElementById("tomMenorSwitchDiv"),orgaoCifrasBotoes=document.getElementById("orgaoCifrasBotoes"),tdVolume=document.getElementById("tdVolume"),volumeDiv=document.getElementById("volumeDiv"),textoVolume=document.getElementById("textoVolume"),volumeInput=document.getElementById("volumeInput"),cifraAvancar=document.getElementById("cifraAvancar"),cifraRepetir=document.getElementById("cifraRepetir"),cifraRetroceder=document.getElementById("cifraRetroceder"),exitfullscreen=document.getElementById("exitfullscreen"),fullscreenDiv=document.getElementById("fullscreenDiv"),botaoFullscreen=document.getElementById("botaoFullscreen"),trackerControls=document.getElementById("trackerControls"),bateria=document.getElementById("bateria"),linhaSelectTom=document.getElementById("linhaSelectTom"),navBar=document.getElementById("navBar"),oracoesEucaristicasDiv=document.getElementById("oracoesEucaristicasDiv"),acorde_10=document.getElementById("acorde_10"),acorde_7=document.getElementById("acorde_7"),acorde_9=document.getElementById("acorde_9"),muteDiv=document.getElementById("muteDiv"),botaoMute=document.getElementById("botaoMute"),iconVolumeMute=document.getElementById("iconVolumeMute"),iconVolume=document.getElementById("iconVolume"),modal01=document.getElementById("modal01"),linksCifraClubList=document.getElementById("linksCifraClubList"),botaoIniciar=document.getElementById("botaoIniciar"),escreverCifraTextArea=document.getElementById("escreverCifraTextArea"),selectInstrumento=document.getElementById("selectInstrumento"),salvarDiv=document.getElementById("salvarDiv"),selectOpcoes=document.getElementById("selectOpcoes"),modalGravar=document.getElementById("modalGravar"),musicaSearch=document.getElementById("musicaSearch"),titulo=document.getElementById("titulo"),bateriaBotoes=document.getElementById("bateriaBotoes"),selectSalvamento=document.getElementById("selectSalvamento"),lightCompasso=document.getElementById("lightCompasso"),modal_loading=document.getElementById("modal_loading"),prepararBateriaBotao=document.getElementById("prepararBateriaBotao"),pararBateriaBotao=document.getElementById("pararBateriaBotao"),play_pause_bateria=document.getElementById("play_pause_bateria"),textoRitmo=document.getElementById("textoRitmo"),listaMusicasCifra=document.getElementById("listaMusicasCifra"),orgaoBox=document.getElementById("orgaoBox"),notaTuner=document.getElementById("notaTuner"),tunerDiv=document.getElementById("tunerDiv"),autoTunerCheck=document.getElementById("autoTunerCheck"),liturgiaDiariaDiv=document.getElementById("liturgiaDiariaDiv"),violinoDesenho=document.getElementById("violinoDesenho"),violaoDesenho=document.getElementById("violaoDesenho"),switchDark=document.getElementById("switchDark"),baixo=document.getElementById("baixo"),mao=document.getElementById("mao"),full=document.getElementById("full"),measureLength=document.getElementById("measureLength"),musicaAcordesTextArea=document.getElementById("musicaAcordesTextArea"),acorde_0=document.getElementById("acorde_0"),acorde_3=document.getElementById("acorde_3"),acorde_4=document.getElementById("acorde_4"),acorde_5=document.getElementById("acorde_5"),acorde_1=document.getElementById("acorde_1"),acorde_2=document.getElementById("acorde_2"),aumentarTomMais=document.getElementById("aumentarTomMais"),diminuirTomMenos=document.getElementById("diminuirTomMenos"),tomMenorSwitch=document.getElementById("tomMenorSwitch"),tituloConfiguracaoTeclas=document.getElementById("tituloConfiguracaoTeclas"),textoConfiguracao=document.getElementById("textoConfiguracao"),tecladoTeclasDiv=document.getElementById("tecladoTeclasDiv"),inputTeclaLabel=document.getElementById("inputTeclaLabel"),elementos={instrumentoSelect:instrumentoSelect,autoCheck:autoCheck,bpm:bpm,selectRitmo:selectRitmo,botaobotaoGravar:botaobotaoGravar,play_pause:play_pause,bpmRange:bpmRange,chimbal:chimbal,brush:brush,meiaLua:meiaLua,prato:prato,aro:aro,caixa:caixa,cravo:cravo,brushCravo:brushCravo,pratoCravo:pratoCravo,stringsBotao:stringsBotao,violaoBotao:violaoBotao,pianoBotao:pianoBotao,baixoBotao:baixoBotao,tomSelect:tomSelect,volumeTexto:volumeTexto,textoCifras:textoCifras,textoAcordeMenor:textoAcordeMenor,textoCifrasFrame:textoCifrasFrame,container:container,voltar:voltar,botaoFonte:botaoFonte,selectFonte:selectFonte,botaoTamanhoIframe:botaoTamanhoIframe,selectTamanhoIframe:selectTamanhoIframe,tomMenorSwitchDiv:tomMenorSwitchDiv,orgaoCifrasBotoes:orgaoCifrasBotoes,tdVolume:tdVolume,volumeDiv:volumeDiv,textoVolume:textoVolume,volumeInput:volumeInput,cifraAvancar:cifraAvancar,cifraRepetir:cifraRepetir,cifraRetroceder:cifraRetroceder,exitfullscreen:exitfullscreen,fullscreenDiv:fullscreenDiv,botaoFullscreen:botaoFullscreen,trackerControls:trackerControls,bateria:bateria,linhaSelectTom:linhaSelectTom,navBar:navBar,oracoesEucaristicasDiv:oracoesEucaristicasDiv,acorde_10:acorde_10,acorde_7:acorde_7,acorde_9:acorde_9,muteDiv:muteDiv,botaoMute:botaoMute,iconVolumeMute:iconVolumeMute,iconVolume:iconVolume,modal01:modal01,linksCifraClubList:linksCifraClubList,botaoIniciar:botaoIniciar,escreverCifraTextArea:escreverCifraTextArea,selectInstrumento:selectInstrumento,salvarDiv:salvarDiv,selectOpcoes:selectOpcoes,modalGravar:modalGravar,musicaSearch:musicaSearch,titulo:titulo,bateriaBotoes:bateriaBotoes,selectSalvamento:selectSalvamento,lightCompasso:lightCompasso,modal_loading:modal_loading,prepararBateriaBotao:prepararBateriaBotao,pararBateriaBotao:pararBateriaBotao,play_pause_bateria:play_pause_bateria,textoRitmo:textoRitmo,listaMusicasCifra:listaMusicasCifra,orgaoBox:orgaoBox,notaTuner:notaTuner,tunerDiv:tunerDiv,autoTunerCheck:autoTunerCheck,liturgiaDiariaDiv:liturgiaDiariaDiv,violinoDesenho:violinoDesenho,violaoDesenho:violaoDesenho,switchDark:switchDark,baixo:baixo,mao:mao,full:full,measureLength:measureLength,musicaAcordesTextArea:musicaAcordesTextArea,acorde_0:acorde_0,acorde_3:acorde_3,acorde_4:acorde_4,acorde_5:acorde_5,acorde_1:acorde_1,acorde_2:acorde_2,aumentarTomMais:aumentarTomMais,diminuirTomMenos:diminuirTomMenos,tomMenorSwitch:tomMenorSwitch,tituloConfiguracaoTeclas:tituloConfiguracaoTeclas,textoConfiguracao:textoConfiguracao,tecladoTeclasDiv:tecladoTeclasDiv,inputTeclaLabel:inputTeclaLabel};function capturarTeclaPressionada(e){if(_configurandoTeclas)mostrarTeclaConfiguracaoTeclas(e);else if(_teclasConfiguracao[e]&&"none"===modal01.style.display){let o=elementos[_teclasConfiguracao[e][0]],a=eventos[_teclasConfiguracao[e][1]];_teclasConfiguracao[e][0].includes("Check")&&(o.checked=!o.checked),o.dispatchEvent(a)}}function limparConfiguracaoTeclas(){confirm("Apagar as Configura\xe7\xf5es de Teclas?")&&localStorage.removeItem("teclasConfiguracao")}function limparConfiguracaoTodas(){confirm("Tem certeza? Isso excluir\xe1 os salvamentos tamb\xe9m")&&(localStorage.clear(),sessionStorage.clear(),caches.delete(),location.reload())}function mostrarSalvarConfiguracaoTeclas(){_configurandoTeclas=!0,modal01.style.display="none",tituloConfiguracaoTeclas.style.display="",titulo.style.display="none",botaoGravar.style.display="none",play_pause.style.display="",prepararBateriaBotao.style.display="none",pararBateriaBotao.style.display=""}function ocultarSalvarConfiguracaoTeclas(){_configurandoTeclas=!1,tituloConfiguracaoTeclas.style.display="none",titulo.style.display="",tecladoTeclasDiv.style.display="none",botaoGravar.style.display="",play_pause.style.display="none",prepararBateriaBotao.style.display="",pararBateriaBotao.style.display="none"}function capturarTeclaConfiguracaoTeclas(e){_configuracaoEvento=e.getAttribute("dataEventoTecla"),selectConfiguracao.style.display="none",modal01.style.display="block",_configuracaoElemento=e.id,selectOpcoes.style.display="none",tecladoTeclasDiv.style.display=""}function verificarSeTemValor(e,o){for(let a in e)e[a][0].includes(o)&&delete e[a]}function mostrarTeclaConfiguracaoTeclas(e){inputTeclaLabel.innerText=e,botaoOkTecla.disabled=!1}function armazenarTeclaConfiguracaoTeclas(){verificarSeTemValor(_teclasConfiguracao,_configuracaoElemento);let e=inputTeclaLabel.innerText,o=[_configuracaoElemento,_configuracaoEvento];_teclasConfiguracao[e]=o,botaoOkTecla.disabled=!0,inputTeclaLabel.innerText="",ocultarModal()}function salvarConfiguracaoTeclas(){_teclasConfiguracao?(localStorage.setItem("teclasConfiguracao",JSON.stringify(_teclasConfiguracao)),ocultarSalvarConfiguracaoTeclas()):alert("Nada foi configurado. Saindo..."),carregarConfiguracaoTeclas()}function carregarConfiguracaoTeclas(){let e=localStorage.getItem("teclasConfiguracao");e&&(_teclasConfiguracao=JSON.parse(e))}function handleTouchStart(e,o,a=!1){e.preventDefault(),o.dispatchEvent(eventoMousedown),a&&o.dispatchEvent(eventoClick)}function isMobileDevice(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function darkModeLocalStorage(){var e=localStorage.getItem("darkMode");e&&"true"===e&&(switchDark.checked=!0,switchDark.dispatchEvent(eventoClick))}function manterTelaLigada_v2(){let e=null;try{e=navigator.wakeLock.request("screen")}catch{}}function verificarOrientacaoCelular(){isMobileDevice()&&(window.matchMedia("(orientation: portrait)").matches&&(_orientacaoCelularPe=!0),window.matchMedia("(orientation: landscape)").matches&&(_orientacaoCelularPe=!1))}function orientacaoCelularAlterado(e){0===e.target.screen.orientation.angle?(_orientacaoCelularPe=!0,"none"!==textoCifrasFrame.style.display&&mostrarNavBar()):(_orientacaoCelularPe=!1,"none"!==textoCifrasFrame.style.display&&ocultarNavBar()),"none"!==exitfullscreen.style.display&&mudarParaFullscreen()}function mostrarBateria(e=!0){e?bateriaBotoes.style.display="":bateriaBotoes.style.display="none",localStorage.setItem("acompCheck",acompCheck.checked)}function ocultarBotoesAcompanhamentoCravo(e=!0){let o=document.getElementsByClassName("trCravoBotoes");if(e){for(let a=0;a<o.length;a++)o[a].style.display="none";tdVolume.style.display="none"}else{for(let t=0;t<o.length;t++)o[t].style.display="";tdVolume.style.display=""}}function ocultarBotoesCravo(e=!0){let o=document.getElementsByClassName("trCravoBotoes");if(e){for(let a=0;a<o.length;a++)o[a].style.display="none";baixo.style.display="none",mao.style.display="none",full.style.display="none",violaoBotao.style.display="",pianoBotao.style.display="",baixoBotao.style.display=""}else{for(let t=0;t<o.length;t++)o[t].style.display="";let n=document.getElementsByClassName("botoesAcompanhamentosRitmo");for(let r=0;r<n.length;r++)n[r].style.display="";violaoBotao.style.display="none",pianoBotao.style.display="none",baixoBotao.style.display="none",baixo.style.display="",mao.style.display="",full.style.display=""}}function ocultarBotoesRitmo(e=!0){var o=document.getElementsByClassName("trBateriaBotoes");if(e)for(let a=0;a<o.length;a++)o[a].style.display="none";else for(let t=0;t<o.length;t++)o[t].style.display=""}function ocultarBotoesAcompanhamentosRitmo(e=!0){let o=document.getElementsByClassName("botoesAcompanhamentosRitmo")[0];e?(o.style.display="none",tdVolume.style.display="none"):(o.style.display="",tdVolume.style.display="")}function pressionarBotaoCravo(){var e=document.getElementsByClassName("selecionadoDrum");e.length>0&&e[0].dispatchEvent(eventoClick)}function deixarAcompanhamentoSelecionado(e){escolherAcompanhamentoOrgao(e,document.getElementById(e))}function ocultarBotaoRec(e=!0){botaoGravar.style.display=e?"none":"block",play_pause.style.display=e?"block":"none"}function escolherAcorde(e,o){if(_configurandoTeclas){capturarTeclaConfiguracaoTeclas(o);return}montarAcordeNotas(o.value),_cifraId>0&&(_cifraParado=!0,_cifraId--),o&&levantarBotoesAcordes(),""===_acordeSelecionado?(_acordeAntesSelecionado=_acordeSelecionado,pararOsAcordes(),o&&ocultarBotaoRec(!1)):(tocarAcorde(o.value,o),o&&ocultarBotaoRec())}function autoMudarRitmo(e=null,o=null){if("none"!==pararBateriaBotao.style.display&&_autoMudarRitmo||"orgao"===_instrumentoSelecionado&&_autoMudarRitmo&&"none"===prepararBateriaBotao.style.display){if(o)"brush"===e.id?(pianoBotao.classList.toggle("instrumentoSelecionado",!1),_epianoSelecionado=!1,baixoBotao.classList.toggle("instrumentoSelecionado",!1),_baixoSelecionado=!1,violaoBotao.classList.toggle("instrumentoSelecionado",!1),_violaoSelecionado=!1,stringsBotao.classList.toggle("instrumentoSelecionado",!0),_acordeSelecionado&&!_stringsSelecionado&&(_stringsSelecionado=!0,_acordeAntesSelecionado=verificarAcompanhamentoEtocar(_acordeSelecionado,_acordeAntesSelecionado,null,!0)),_guitarraSelecionado=!1,stopGuitarra()):"aro"===e.id?(pianoBotao.classList.toggle("instrumentoSelecionado",!0),_epianoSelecionado=!0,baixoBotao.classList.toggle("instrumentoSelecionado",!0),_baixoSelecionado=!0,violaoBotao.classList.toggle("instrumentoSelecionado",!1),_violaoSelecionado=!1,stringsBotao.classList.toggle("instrumentoSelecionado",!1),_stringsSelecionado=!1,pararOsAcordes(!1,!1),_guitarraSelecionado=!1,stopGuitarra()):"caixa"===e.id?(pianoBotao.classList.toggle("instrumentoSelecionado",!0),_epianoSelecionado=!0,baixoBotao.classList.toggle("instrumentoSelecionado",!0),_baixoSelecionado=!0,violaoBotao.classList.toggle("instrumentoSelecionado",!0),_violaoSelecionado=!0,stringsBotao.classList.toggle("instrumentoSelecionado",!1),_stringsSelecionado=!1,pararOsAcordes(!1,!1),_guitarraSelecionado=!1,stopGuitarra()):"chimbal"===e.id?(pianoBotao.classList.toggle("instrumentoSelecionado",!0),_epianoSelecionado=!0,baixoBotao.classList.toggle("instrumentoSelecionado",!0),_baixoSelecionado=!0,violaoBotao.classList.toggle("instrumentoSelecionado",!0),_violaoSelecionado=!0,stringsBotao.classList.toggle("instrumentoSelecionado",!0),_acordeSelecionado&&!_stringsSelecionado&&(_stringsSelecionado=!0,_acordeAntesSelecionado=verificarAcompanhamentoEtocar(_acordeSelecionado,_acordeAntesSelecionado,null,!0)),_stringsSelecionado=!0,_guitarraSelecionado=!1,stopGuitarra()):"meiaLua"===e.id&&(pianoBotao.classList.toggle("instrumentoSelecionado",!0),_epianoSelecionado=!0,baixoBotao.classList.toggle("instrumentoSelecionado",!0),_baixoSelecionado=!0,violaoBotao.classList.toggle("instrumentoSelecionado",!0),_violaoSelecionado=!0,stringsBotao.classList.toggle("instrumentoSelecionado",!0),_acordeSelecionado&&!_stringsSelecionado&&(_stringsSelecionado=!0,_guitarraSelecionado=!0,_acordeAntesSelecionado=verificarAcompanhamentoEtocar(_acordeSelecionado,_acordeAntesSelecionado,null,!0),playGuitarra()),_stringsSelecionado=!0,_guitarraSelecionado=!0);else if("orgao"===_instrumentoSelecionado){var a=e||document.querySelector(".selecionado");"baixo"===a.id||"mao"===a.id?brushCravo.dispatchEvent(eventoTouchstart):"full"===a.id&&cravo.dispatchEvent(eventoTouchstart)}}}function escolherAcompanhamentoBateria(botao,variavel){if(_configurandoTeclas){botao.classList.toggle("instrumentoSelecionado",!1),capturarTeclaConfiguracaoTeclas(botao);return}!1==botao.classList.contains("instrumentoSelecionado")?(eval(variavel+" = "+JSON.stringify(!0)),"_stringsSelecionado"===variavel&&_stringsParado&&""!==_acordeAntesSelecionado&&(_stringsParado=!1,(_grupoNotasStrings=montarAcorde(_acordeNotas,_acordeBaixo,_grupoNotasStrings=verificarGrupoNotasInstanciado(_grupoNotasStrings),"strings")).play()),botao.classList.toggle("instrumentoSelecionado",!0)):(eval(variavel+" = "+JSON.stringify(!1)),botao.classList.toggle("instrumentoSelecionado",!1),"epiano"!==_instrumentoSelecionado||"_stringsSelecionado"!==variavel||_stringsSelecionado||pararOsAcordes())}function escolherAcompanhamentoOrgao(e,o){if(_configurandoTeclas){capturarTeclaConfiguracaoTeclas(o);return}_acompanhamentoSelecionado=e,pressionarBotaoAcompanhamento(o),autoMudarRitmo(o)}function tocarAcorde(e,o){let a=o?o.value:e;_acordeAntesSelecionado=verificarAcompanhamentoEtocar(a,_acordeAntesSelecionado),o&&o.classList.add("pressionado")}function setTom(e="C"){tomSelect.value=e}function refinarAcorde(e){if(e.length>1&&"b"===e[1]){let o=e.slice(0,2);return e.replace(o,acidentesCorrespondentesJson[o])}return e}function getNotaBaixo(e){let o;return e.includes("/")?(o=refinarAcorde(e.split("/")[1]),e=refinarAcorde(e.split("/")[0]),o=notasAcordesJson[o][0]):(e=refinarAcorde(e),o=notasAcordesJson[e][0]),[e,o]}function montarAcordeNotas(e){if(""!==e){let o=getNotaBaixo(e=e.replace("E#","F"));e=o[0],_acordeBaixo=o[1],_acordeNotas=notasAcordesJson[e]}_acordeSelecionado=e}function montarAcorde(e,o,a,t="orgao"){if(_guitarraSelecionado&&playGuitarra(),a){if("strings"!==t||"epiano"!==_instrumentoSelecionado||!_stringsSelecionado||_violaoSelecionado||_baixoSelecionado||_epianoSelecionado||_autoMudarRitmo){if("orgao"===_instrumentoSelecionado){if("full"===_acompanhamentoSelecionado){a.addSound(acordes[t+"_"+o+"_grave"]),a.addSound(acordes[t+"_"+e[0]+"_baixo"]),a.addSound(acordes[t+"_"+e[1]+"_baixo"]),a.addSound(acordes[t+"_"+e[2]+"_baixo"]),a.addSound(acordes[t+"_"+e[0]]),a.addSound(acordes[t+"_"+e[1]]),a.addSound(acordes[t+"_"+e[2]]);for(var n=2,r=e.length;n<r;n++)a.addSound(acordes[t+"_"+e[n]])}else if("baixo"===_acompanhamentoSelecionado){a.addSound(acordes[t+"_"+o+"_grave"]),a.addSound(acordes[t+"_"+e[0]+"_baixo"]),a.addSound(acordes[t+"_"+e[1]+"_baixo"]),a.addSound(acordes[t+"_"+e[2]+"_baixo"]);for(var n=2,r=e.length;n<r;n++)a.addSound(acordes[t+"_"+e[n]+"_baixo"])}else{a.addSound(acordes[t+"_"+o]),a.addSound(acordes[t+"_"+e[1]]),a.addSound(acordes[t+"_"+e[2]]);for(var n=2,r=e.length;n<r;n++)a.addSound(acordes[t+"_"+e[n]])}a.attack=.1}else{"strings"===t&&"orgao"===_instrumentoSelecionado&&a.addSound(acordes[t+"_"+o+"_grave"]),a.addSound(acordes[t+"_"+e[0]+"_baixo"]),a.addSound(acordes[t+"_"+e[1]+"_baixo"]),a.addSound(acordes[t+"_"+e[2]+"_baixo"]),a.addSound(acordes[t+"_"+e[0]]),a.addSound(acordes[t+"_"+e[1]]),a.addSound(acordes[t+"_"+e[2]]);for(var n=2,r=e.length;n<r;n++)a.addSound(acordes[t+"_"+e[n]])}}else a.addSound(acordes["strings_"+e[0]]),a.addSound(acordes["strings_"+e[0]+"_baixo"]),a.addSound(acordes["strings_"+e[0]+"_grave"])}return a}function verificarGrupoNotasInstanciado(e){return e||((e=new Pizzicato.Group).volume=_volume),e}function verificarAcompanhamentoEtocar(e,o,a=null,t=!1){if(o===e?(pararOsAcordes(!0,null!=a?a:_stringsSelecionado),esperar=50):pararOsAcordes(!0),o=e,montarAcordeNotas(e),"epiano"!==_instrumentoSelecionado||_violaoSelecionado||_epianoSelecionado||_baixoSelecionado||_stringsSelecionado||(stringsBotao.classList.toggle("instrumentoSelecionado",!0),_stringsSelecionado=!0),"none"===iconVolumeMute.style.display){if(_stringsSelecionado&&(_stringsParado=!1,montarAcorde(_acordeNotas,_acordeBaixo,_grupoNotasStrings=verificarGrupoNotasInstanciado(_grupoNotasStrings),"strings").play()),_epianoSelecionado&&"epiano"===_instrumentoSelecionado&&!t)_grupoNotas=verificarGrupoNotasInstanciado(_grupoNotas),montarAcorde(_acordeNotas,_acordeBaixo,_grupoNotas,"epiano").play();else if("orgao"===_instrumentoSelecionado){_grupoNotas=verificarGrupoNotasInstanciado(_grupoNotas);let n=montarAcorde(_acordeNotas,_acordeBaixo,_grupoNotas,_instrumentoSelecionado);setTimeout(()=>{n.play()},60)}}return o}function pararOsAcordes(e=!1,o=!1){if(_somSolo&&(_somSolo.stop(),_notasSolo=null),_grupoNotas&&(_grupoNotas.stop(),e)){var a=_grupoNotas.sounds.length;for(let t=a-1;t>-1;t--)_grupoNotas.removeSound(_grupoNotas.sounds[t])}if(!1===o&&_grupoNotasStrings&&(_stringsParado=!0,_grupoNotasStrings.stop(),e)){var a=_grupoNotasStrings.sounds.length;for(let n=a-1;n>-1;n--)_grupoNotasStrings.removeSound(_grupoNotasStrings.sounds[n])}stopGuitarra(!0)}function levantarBotoesAcordes(){let e=document.querySelectorAll(".pressionado");e.forEach(e=>e.classList.remove("pressionado"))}function levantarBotoesAcompanhamento(){var e=document.getElementsByClassName("selecionado");for(let o=0;o<e.length;o++)e[o].classList.toggle("selecionado",!1)}function pressionarBotaoAcompanhamento(e){!1===botaoAcompPressionado(e)&&(""!==_acordeAntesSelecionado&&"epiano"!==_instrumentoSelecionado&&(_acordeAntesSelecionado=verificarAcompanhamentoEtocar(_acordeAntesSelecionado,_acordeAntesSelecionado,!1)),levantarBotoesAcompanhamento(),pressionarBotaoAcomp(e))}function botaoAcompPressionado(e){return!!e.classList.contains("selecionado")}function pressionarBotaoAcomp(e){e.classList.toggle("selecionado",!0)}function alterarVolume(e,o){_volume=parseFloat(e),_grupoNotas&&(_grupoNotas.volume=_volume),_grupoNotasStrings&&(_grupoNotasStrings.volume=_volume),e===o?volumeTexto.innerHTML=10*e:volumeTexto.innerHTML=10*e+"*"}function mudarTomCifra(e,o){_tomSelectedIndexCifra=tomSelect.selectedIndex;let a=AlterarTom(textoCifras.contentDocument.body.innerHTML,e,o);a.success?(textoCifras.contentDocument.body.innerHTML=a.message,addEventCifras(textoCifras,_cifraId-1)):alert(a.message)}function mudarTom(e){var o=acordesCampoHarmonicoJson[e];Array.from(document.getElementsByClassName("acorde")).forEach(e=>{var a=e.id.split("_")[1];e.value=o[a]});var a=document.getElementsByClassName("pressionado");if(a.length>0){var t=a[0];escolherAcorde(t.value,t)}mudarTomMenor(tomSelect.selectedIndex),"none"===textoCifrasFrame&&localStorage.setItem("tomSelecionadoIndex",tomSelect.selectedIndex)}function mudarTomMenor(e){textoAcordeMenor.innerText=acordesTons[e+12]}function aumentarTom(e,o,a){if(_configurandoTeclas){capturarTeclaConfiguracaoTeclas(document.activeElement);return}var t=document.getElementById(a),n=t.selectedIndex;if(t.value.includes("m"))var r=tonsMenores;else var r=tonsMaiores;e?n+o===t.length?t.value=r[0]:n+o>t.length?t.value=r[-1+o]:t.value=r[n+o]:n-o<0?0===n?t.value=r[t.length-o]:t.value=r[t.length-1]:t.value=r[n-o],"block"===textoCifrasFrame.style.display?mudarTomCifra(e,o):mudarTom(t.value)}function adicionarTonsSelect(e,o,a){var t=document.getElementById(e);t.innerHTML="";var n=tonsMaiores;!1===a&&(n=tonsMenores);for(var r=0;r<n.length;r++){let i=document.createElement("option");i.value=n[r],i.textContent+=n[r],t.appendChild(i)}t.selectedIndex=o}function mostrarTextoCifrasCarregado(e=null,o=null){e&&(e.includes("m")?adicionarTonsSelect("tomSelect",tonsMenores.indexOf(e),!1):adicionarTonsSelect("tomSelect",tonsMaiores.indexOf(e),!0),_tomSelectedIndexCifra=tomSelect.selectedIndex),o&&(textoCifras.contentDocument.body.innerHTML=o),document.body.classList.contains("bg-dark")?textoCifras.contentWindow.document.querySelector("pre").style.color="#fff":textoCifras.contentWindow.document.querySelector("pre").style.color="#000","none"===textoCifrasFrame.style.display&&mudarParaTelaFrame(),addEventCifras(textoCifras),mudarTamanhoFrameCifras(_orientacaoCelularPe),tableRitmo.style.marginLeft=""}function selecionarCifraId(){var e=textoCifras.contentDocument.getElementsByClassName("cifraSelecionada");e.length>0&&(_cifraId=e[0].id.split("cifra")[1]-1)}function mudarParaTelaFrame(){textoCifrasFrame.style.display="block";for(var e=document.getElementsByClassName("orgaoBotoes"),o=0;o<e.length;o++)e[o].style.display="none";container.classList.remove("d-sm-flex"),volumeDiv.style.display="none",voltar.style.display="block",botaoFonte.style.display="block",selectFonte.style.display="none",botaoTamanhoIframe.style.display="block",selectTamanhoIframe.style.display="none",tomMenorSwitchDiv.style.display="none",orgaoCifrasBotoes.style.display="",tdVolume.setAttribute("rowspan",""),tdVolume.setAttribute("colspan",5),volumeDiv.style.display="block",textoVolume.classList.remove("textoVertical"),volumeInput.setAttribute("orient",""),$("#tdVolume").appendTo("#orgaoTable"),$("#textoVolume").prependTo("#volumeDiv"),$("#orgaoTable").prependTo("#bateriaBox"),!1===_orientacaoCelularPe&&ocultarNavBar()}function addEventCifras(e,o){for(var a=e.contentDocument.getElementsByTagName("b"),t=0;t<a.length;t++)a[t].addEventListener("click",function(e){var o=textoCifras.contentDocument.getElementsByClassName("cifraSelecionada");o.length>0&&o[0].classList.remove("cifraSelecionada"),e.target.classList.add("cifraSelecionada"),e.target.scrollIntoView(),parent.tocarCifraManualmente(e.target),parent.focus()});if(-1===o&&(o=0),o>=0){let n=a[o];(n||n>=0)&&(n.classList.add("cifraSelecionada"),_cifraParado||(_acordeAntesSelecionado=verificarAcompanhamentoEtocar(n.innerText,_acordeAntesSelecionado)))}}function tocarCifraManualmente(e){_cifraId=e.id.split("cifra")[1]-1,!1===_cifraParado&&avancarCifra("avancar",cifraAvancar)}function tocarSolo(e){_acordeSelecionado=(_notasSolo=e.split("."))[0],tocarAcorde(_notasSolo[0],null),_notasSolo.shift()}function avancarCifra(e,o){if(_configurandoTeclas){capturarTeclaConfiguracaoTeclas(o);return}if(""===e)escolherAcorde("",o),botaoGravar.style.display="block",play_pause.style.display="none";else if("repetir"===e)!1===_cifraParado&&(_acordeAntesSelecionado=verificarAcompanhamentoEtocar(_acordeAntesSelecionado,_acordeAntesSelecionado,50));else{var a=textoCifras.contentDocument,t=a.getElementsByTagName("b"),n=a.getElementsByClassName("cifraSelecionada");if("avancar"===e&&_cifraId<t.length){n.length>0&&n[0].classList.remove("cifraSelecionada"),_cifraParado=!1;let r=t[_cifraId],i=r.innerHTML.trim();i.includes(".")?tocarSolo(i):tocarAcorde(i,null),cifraRetroceder.classList.contains("pressionado")&&cifraRetroceder.classList.remove("pressionado"),o.classList.toggle("pressionado",!0),r.classList.add("cifraSelecionada"),r.scrollIntoView(),_cifraId++}if("retroceder"===e&&_cifraId-1>0){n.length>0&&n[0].classList.remove("cifraSelecionada"),!1===_cifraParado&&_cifraId--;var l=t[_cifraId-1];tocarAcorde(l.innerHTML.trim(),null),cifraAvancar.classList.contains("pressionado")&&cifraAvancar.classList.remove("pressionado"),o.classList.toggle("pressionado",!0),l.classList.add("cifraSelecionada"),l.scrollIntoView()}botaoGravar.style.display="none",play_pause.style.display="block"}}function mudarTamanhoFrameCifras(e){textoCifras.contentWindow.document.querySelector("pre").style.fontSize=selectFonte.value+"px"}function rolagemTelaOracaoEucaristica(e=!0){if("none"!==oracoesEucaristicasDiv.style.display){var o="scrollOracoesEuc";if(e)localStorage.setItem(o,modal01.scrollTop);else{var a=localStorage.getItem(o);a&&modal01.scrollTo(0,parseInt(a))}}}function posicaoBotaoFecharModal(e,o){if(o){let a=document.getElementById("spanBotaoFecharModal").getBoundingClientRect();e.style.position="fixed",e.style.top=a.top+"px",e.style.left=a.right+"px"}else e.style.position="",e.style.top="",e.style.left=""}function voltarParaOrgao(){voltar.style.display="none",botaoFonte.style.display="none",selectFonte.style.display="none",botaoTamanhoIframe.style.display="none",selectTamanhoIframe.style.display="none",orgaoCifrasBotoes.style.display="none",textoCifrasFrame.style.display="none",tomMenorSwitchDiv.style.display="";for(var e=document.getElementsByClassName("orgaoBotoes"),o=0;o<e.length;o++)e[o].style.display="";container.classList.add("d-sm-flex"),tdVolume.setAttribute("rowspan",5),tdVolume.setAttribute("colspan",""),volumeDiv.style.display="flex",textoVolume.style.display="",textoVolume.classList.add("textoVertical"),volumeInput.setAttribute("orient","vertical"),$("#tdVolume").appendTo("#orgaoControle"),$("#textoVolume").appendTo("#volumeDiv"),$("#orgaoTable").appendTo("#orgaoBox"),mostrarNavBar(),adicionarTonsSelect("tomSelect",0,!0),ultimoTomSelecionadoStorage(),tableRitmo.style.marginLeft="-12px"}function mudarParaFullscreen(){exitfullscreen.style.display="flex",botaoFullscreen.style.display="none",bateria.style.display="none",switchDarkDiv.style.display="none",muteDiv.style.display="","none"!==textoCifrasFrame.style.display&&!1===_orientacaoCelularPe&&isMobileDevice()&&ocultarNavBar();var e=document.body,o=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;o&&o.call(e)}function sairDeFullscreen(){"none"!==exitfullscreen.style.display&&("none"===textoCifrasFrame.style.display&&mostrarNavBar(),exitfullscreen.style.display="none",botaoFullscreen.style.display="flex",switchDarkDiv.style.display="",muteDiv.style.display="none",document.exitFullscreen(),linhaSelectTom.classList.add("d-flex"),mutarVolume(!1))}function mostrarNavBar(){$("#fullscreenDiv").prependTo("#linhaNavBar"),$("#botaoOpcoes").prependTo("#linhaNavBar"),$("#titulo").appendTo("#linhaNavBar"),$("#botaoSalvar").appendTo("#linhaNavBar"),$("#switchDarkDiv").appendTo("#linhaNavBar"),$("#muteDiv").appendTo("#linhaNavBar"),navBar.style.display="block",linhaSelectTom.style.width=""}function ocultarNavBar(){$("#titulo").prependTo("#linhaSelectTom"),$("#fullscreenDiv").prependTo("#linhaSelectTom"),$("#botaoOpcoes").prependTo("#linhaSelectTom"),$("#botaoSalvar").appendTo("#linhaSelectTom"),$("#muteDiv").appendTo("#linhaSelectTom"),navBar.style.display="none",linhaSelectTom.style.width="100%"}function ultimoTomSelecionadoStorage(){var e=localStorage.getItem("tomSelecionadoIndex");e&&(tomSelect.selectedIndex=e,tomSelect.dispatchEvent(new Event("change")))}function carregarConfiguracoesDoStorage(){darkModeLocalStorage(),adicionarTonsSelect("tomSelect",0,!0),ultimoTomSelecionadoStorage();let e=localStorage.getItem("acompCheck");e&&"true"===e?(acompCheck.checked=!0,acompCheck.dispatchEvent(eventoClick),mostrarBateria(!0)):acompCheck.checked=!1;let o=localStorage.getItem("instrumentoSelecionadoIndex");o&&(instrumentoSelect.selectedIndex=o,instrumentoSelect.dispatchEvent(eventoChange),_instrumentoSelecionado=instrumentoSelect.value.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace("banda","epiano")),gerarRitmosNomes(ritmosNomes),selecionarRitmo(selectRitmo.value)}function selecionarTomMenor(e){e?(textoAcordeMenor.style.color="black",tomSelect.style.color="grey",acorde_10.style.display="block",acorde_7.style.display="block",acorde_9.style.display="block"):(textoAcordeMenor.style.color="grey",tomSelect.style.color="black",acorde_10.style.display="none",acorde_7.style.display="none",acorde_9.style.display="none")}function aumentarTom_click(e){timer&&clearTimeout(timer),timer=setTimeout(function(){aumentarTom(e,1,"tomSelect")},240)}function aumentarTom_clickDuplo(e){clearTimeout(timer),aumentarTom(e,2,"tomSelect")}function showselectFonte(e){e?(botaoFonte.style.display="none",selectFonte.style.display=""):"none"!==textoCifrasFrame.style.display&&(textoCifras.contentWindow.document.querySelector("pre").style.fontSize=selectFonte.value+"px")}function showselectIframe(e){e?(botaoTamanhoIframe.style.display="none",selectTamanhoIframe.style.display=""):"none"!==textoCifrasFrame.style.display&&(textoCifrasFrame.style.height=selectTamanhoIframe.value+"px",textoCifras.style.height=selectTamanhoIframe.value+"px")}function prepararMudarTomCifra(e){var o;setTimeout(function(){if("none"==textoCifrasFrame.style.display)mudarTom(e);else{if(e.includes("m"))var o=tonsMenores.indexOf(e);else var o=tonsMaiores.indexOf(e);(o-=_tomIndex)<0?mudarTomCifra(!1,Math.abs(o)):mudarTomCifra(!0,o)}},0)}function pegarTomCifra(e){_tomIndex=e.includes("m")?tonsMenores.indexOf(e):tonsMaiores.indexOf(e)}function primeiraLetraMaiuscula(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function isPar(e){return e%2==0}function AlterarTom(e,o,a){try{o||(a*=-1);var t=GetAcordes(e,a);return{success:!0,message:t}}catch(n){return{success:!1,message:n.message}}}function EditarCifra(e){try{var o=SearchAcordes(e);return{success:!0,message:o}}catch(a){return{success:!1,message:a.message}}}function GetAcordes(e,o=0){if(!e.includes("<b"))return SearchAcordes(e);for(var a=e.split("<b"),t=[],n=0;n<a.length;n++)if(0===n)t.push(a[n]);else{var r=a[n].split(">")[1].split("<")[0],i=a[n].split("<")[1],l=r,s=GetAcorde(l),c=s[0],d=s[1];for(l=c,d.includes("/")||(l+=d);!notasAcordes.includes(l);)l=l.substring(0,l.length-1);d.includes("/")&&(l+=d),""!==l?(0!==o&&(l=MudarCifraTom(o,c),d.includes("/")&&(d="/"+MudarCifraTom(o,d.split("/")[1])),l+=d),l=">"+l+"<"+i,t.push('<b id="cifra'+n+'"'+l)):t.push("       "+i)}return t.join("")}function GetAcorde(e){var o=e=e.replace("(9)","9").replace("m(5-)","\xb0").replace("m7(5-)","\xb07").replace("\xba","\xb0"),a="";e.includes("(")&&(o=e.split("(")[0]),e.includes("/")&&!e.includes("(")&&(o=e.split("/")[0],a="/"+GetAcorde(e.split("/")[1])[0]);var t=o;return t.length>1&&(t="#"===t[1]?t[0]+"#":"b"===t[1]?t[0]+"b":t[0],""===a&&(a=o.split(t)[1]),t=acidentesCorrespondentesJson[t]),[t,a]}function MudarCifraTom(e,o){var a=tonsMaiores.indexOf(o);return(a+=e)>11?a-=12:a<0&&(a+=12),tonsMaiores[a]}function SearchAcordes(e){var o=e.split("\n"),a=[],t=/^[A-Ga-g0-9m#bsus°º+/()| \.]*$/,n=/\b[A-G()]/,r=1;return a.push("<style>.cifraSelecionada{background-color:#ff0}pre{line-height:1.6;font-size:14px}</style><pre>"),o.forEach(function(e){var o=e.replace("[Intro]","").replace("[Solo]","").replace("[Final]","");if(e&&t.test(o)){var i=e.split(" ");i.forEach(function(e){if(e&&t.test(e)&&n.test(e)){var o,l="";if(e.includes(".")){var s=e.split(".",2);e=s[0],l=s.length>1?"."+s[1]:""}"("===e[0]?(a.push("("),o=GetAcorde(e.split("(")[1].replace("|",""))):")"===e[0]?(a.push(")"),o=GetAcorde(e.split(")")[1].replace("|",""))):e.endsWith(")")?(a.push(")"),o=GetAcorde(e.split(")")[0].replace("|",""))):e.endsWith("(")?(a.push("("),o=GetAcorde(e.split("(")[0].replace("|",""))):o=GetAcorde(e.replace("|",""));var c,d=o[0]+o[1],u=d;for(e.includes("/")&&(u=u.split("/")[0]);!notasAcordes.includes(u);)d=d.substring(0,d.length-1);d?(d=">"+d+l+"</b>",a.push('<b id="cifra'+r+'"'+d),e!==i[i.length-1]&&a.push(" "),r++):a.push("")}else a.push(e+" ")}),a.push("\n")}else a.push(e+"\n")}),a.pop(),a.push("</pre>"),a.join("")}deixarAcompanhamentoSelecionado("full"),verificarOrientacaoCelular(),manterTelaLigada_v2(),carregarConfiguracaoTeclas(),document.addEventListener("visibilitychange",function(){isMobileDevice()&&"visible"===document.visibilityState&&manterTelaLigada_v2()}),document.addEventListener("keydown",function(e){capturarTeclaPressionada(e.key)}),window.onerror=function(e,o,a,t,n){alert("Erro!\n"+e+"\nArquivo: "+o+"\nLinha: "+a+"\nPosicao: "+t)},selectRitmo.addEventListener("change",function(e){_grupoNotas=verificarGrupoNotasInstanciado(_grupoNotas)}),bpm.addEventListener("change",function(e){_grupoNotas=verificarGrupoNotasInstanciado(_grupoNotas)}),autoCheck.addEventListener("change",function(e){(_autoMudarRitmo=this.checked)?(_cravoSelecionado?ocultarBotoesAcompanhamentoCravo():ocultarBotoesAcompanhamentosRitmo(),"none"===textoCifrasFrame.style.display&&(isMobileDevice()?orgaoTable.style.marginLeft="5px":orgaoTable.style.marginLeft="40px")):(_cravoSelecionado?ocultarBotoesAcompanhamentoCravo(!1):ocultarBotoesAcompanhamentosRitmo(!1),"none"===textoCifrasFrame.style.display&&(orgaoTable.style.marginLeft=""))}),instrumentoSelect.addEventListener("change",e=>{var o;_instrumentoSelecionado=instrumentoSelect.value.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace("banda","epiano")}),window.addEventListener("orientationchange",e=>{orientacaoCelularAlterado(e)});