@model LinksModel

@{
    ViewData["Title"] = "Youtube";
}

@*<body onload='carregarLinkUrl()'>*@
<body>
	<br />

	<form method="post" asp-controller="Youtube" asp-action="GerarLink">
		<input type="text" id="input" name="texto" onfocus="this.select()">
		<button id="okButton" type="submit">Ir</button>
	</form>

	<br />
	<br />

	@if (Model.YoutubeImageLinks != null) {

		if (Model.YoutubeImageLinks.Count == 1)
		{
			<iframe style="display:block" id="youtubeFrame" src="@Model.YoutubeImageLinks.ElementAt(0).Value" allowfullscreen allow="autoplay"></iframe>
		}

		else
		{
			foreach (var linkYoutube in Model.YoutubeImageLinks)
			{
				string linkid = linkYoutube.Value.Replace("https://www.youtube.com/embed/", "");

				@*<a href="@linkYoutube.Value" target="@linkid">*@
				<a href="@linkYoutube.Value" id="@linkid" onclick="AbrirVideo(@linkid)">
					<img class="rounded" src="@linkYoutube.Key" />
				</a>
				@*<iframe id="@linkid" name="@linkid"></iframe>*@

				@*<iframe src="@linkYoutube" allowfullscreen ></iframe>*@
			}
		}
	}

	else
	{
		<iframe style="display:none" id="youtubeFrame" src="" allowfullscreen allow="autoplay"></iframe>
	}

	<br>

	<script>
		function AbrirVideo(linkid){
			var linkElement = document.getElementById(linkid);
			var frame = document.createElement("iframe");

			frame.setAttribute('src', linkElement.getAttribute('href'));
			//frame.setAttribute('class', linkElement.getAttribute('class'));
			//frame.style.width = "100%";
			//frame.onload = function () {
			//	frame.style.height = frame.contentWindow.document.body.scrollHeight + "px";
			//};

			linkElement.parentNode.replaceChild(frame, linkElement);
		}
	</script>
</body>